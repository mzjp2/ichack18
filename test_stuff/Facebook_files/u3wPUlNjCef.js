if (self.CavalryLogger) { CavalryLogger.start_js(["39V9q"]); }

__d("VideoChannelCallerToPlayerOriginMap",[],(function a(b,c,d,e,f,g){f.exports={internal:"unknown",www_feed_pivots:"newsfeed",www_feed_snowlift:"unknown",misc_photo_set:"unknown",mobile:"unknown",search:"search",www_feed_rhc:"newsfeed",www_notification:"notifications",www_permalink:"permalink",www_permalink_rhc:"permalink",www_permalink_rhc_from_notification:"notifications",my_video_channels_ent_query:"unknown",top_followed_video_channels_ent_query:"unknown",badge:"unknown",pagination:"unknown",subtitle:"unknown",channel_view_from_unknown:"unknown",channel_view_from_newsfeed:"newsfeed",channel_view_from_explorefeed:"unknown",live_indexer_from_explorefeed:"unknown",live_indexer_from_newsfeed:"unknown",nn_indexer_from_newsfeed:"unknown",channel_view_from_search:"unknown",channel_view_from_newsfeed_pivot:"unknown",newsfeed_pivot_inline:"unknown",mobile_newsfeed_pivot_inline:"unknown",channel_view_from_page_call_to_action:"unknown",channel_view_from_page_timeline:"page_timeline",channel_view_from_page_timeline_featured:"unknown",channel_view_from_page_video_tab:"page_timeline",channel_view_from_page_home_hero:"unknown",channel_view_from_user_timeline:"user_timeline",channel_view_from_user_video_tab:"unknown",channel_view_from_group_timeline:"group",channel_view_from_group_video_tab:"unknown",channel_view_from_saved_story:"unknown",saved_story_inline:"unknown",channel_view_from_shared_with_you_story:"unknown",shared_with_you_story_inline:"unknown",channel_view_from_latest_from_your_channels_story:"unknown",latest_from_your_channels_story_inline:"unknown",channel_view_from_channel_pivot:"unknown",channel_pivot_inine:"unknown",channel_view_from_recommended_channel_story:"unknown",recommended_channel_story_inline:"unknown",channel_view_from_video_home:"video_home",video_home_inline:"unknown",video_home_channel_see_all:"unknown",social_player_up_next:"unknown",channel_view_from_casting:"unknown",connected_tv:"unknown",connected_tv_discovery:"unknown",connected_tv_player:"unknown",connected_tv_profile:"unknown",video_home_feed:"unknown",video_home_hero:"unknown",feed_survey_swipe:"unknown",feed_pivots_inline:"newsfeed",channel_view_from_feed_pivots:"newsfeed",video_sets_cache_refresh:"unknown",video_sets_cache_check:"unknown",dummy_story_recommended_videos:"unknown",dummy_story_friends_enjoying:"unknown",live_event_video_set:"unknown",live_videos_set:"unknown",single_creator_video_set:"unknown",frt_tool:"unknown",dummy_story_friends_enjoying_now:"unknown",dummy_story_dummy_action:"unknown",oculus_video:"unknown",trending_demographics_live:"unknown",live_map:"live_map",unconnected_live_video:"unknown",profile_video_gallery:"unknown",channel_view_from_playlist:"unknown",oculus_social_hub:"unknown",akira:"unknown",is_live_video_chaining:"unknown",is_live_video_chaining_others:"unknown",tahoe:"unknown",living_room:"unknown",shows_cover_trailer:"page_timeline",shows_episodes_tab:"page_timeline",shows_playlists_tab:"page_timeline",shows_home_tab:"page_timeline",shows_more_videos_tab:"page_timeline",parent_page_timeline:"page_timeline",watch_watchlist_tab:"unknown",watch_feed_tab:"unknown",wns:"unknown",explore_feed_deep_dive:"unknown"}}),null);
__d("VideoDuration.react",["cx","fbt","DurationFormatter","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){if(this.props.isLive)return c("React").createElement("div",{className:"_2pq9"},i._("LIVE"));if(this.props.duration)return c("React").createElement("div",{className:"_2pq8"},c("DurationFormatter").formatShort(this.props.duration));return null};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("TahoeUpNextTabRootQuery.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"parentVideoID",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"entryPoint",type:"VideoChannelEntryPoint",defaultValue:null},{kind:"LocalArgument",name:"scale",type:"Float",defaultValue:null}],j={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},l={kind:"Variable",name:"scale",variableName:"scale",type:"Float"},m=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}],n=[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}];return{kind:"Request",operationKind:"query",name:"TahoeUpNextTabRootQuery",id:"1787910834613238",text:null,metadata:{},fragment:{kind:"Fragment",name:"TahoeUpNextTabRootQuery",type:"Query",metadata:null,argumentDefinitions:i,selections:[{kind:"FragmentSpread",name:"TahoeUpNextTab_query",args:[{kind:"Variable",name:"entry_point",variableName:"entryPoint",type:null},{kind:"Variable",name:"id",variableName:"parentVideoID",type:null},{kind:"Variable",name:"scale",variableName:"scale",type:null}]}]},operation:{kind:"Operation",name:"TahoeUpNextTabRootQuery",argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"video",storageKey:null,args:[{kind:"Variable",name:"id",variableName:"parentVideoID",type:"ID!"}],concreteType:"Video",plural:false,selections:[{kind:"LinkedField",alias:null,name:"video_channel",storageKey:null,args:[{kind:"Variable",name:"entry_point",variableName:"entryPoint",type:"VideoChannelEntryPoint"}],concreteType:null,plural:false,selections:[j,k,{kind:"LinkedField",alias:null,name:"video_channel_feed",storageKey:'video_channel_feed(caller:"tahoe",first:20)',args:[{kind:"Literal",name:"caller",value:"tahoe",type:"VideoChainingCaller"},{kind:"Literal",name:"first",value:20,type:"Int"}],concreteType:"VideoChannelFeedConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"VideoChannelFeedEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[j,k,{kind:"InlineFragment",type:"Story",selections:[{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:true,selections:[{kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:false,selections:[j,k,{kind:"InlineFragment",type:"Video",selections:[{kind:"LinkedField",alias:null,name:"preferred_thumbnail",storageKey:null,args:null,concreteType:"VideoThumbnail",plural:false,selections:[{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:[{kind:"Literal",name:"height",value:714,type:"Int"},l,{kind:"Literal",name:"width",value:714,type:"Int"}],concreteType:"Image",plural:false,selections:m},k,{kind:"LinkedField",alias:"small_image",name:"image",storageKey:null,args:[{kind:"Literal",name:"height",value:172,type:"Int"},l,{kind:"Literal",name:"width",value:172,type:"Int"}],concreteType:"Image",plural:false,selections:m}]},{kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"message",storageKey:null,args:null,concreteType:"TextWithEntities",plural:false,selections:n},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:null,plural:false,selections:[j,k,{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"InlineFragment",type:"Page",selections:[{kind:"ScalarField",alias:"page_is_blue_verified",name:"is_verified",args:null,storageKey:null},{kind:"ScalarField",alias:"page_is_gray_verified",name:"is_verified_page",args:null,storageKey:null}]},{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:"user_is_blue_verified",name:"is_verified",args:null,storageKey:null}]}]},{kind:"ScalarField",alias:null,name:"play_count",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"broadcast_status",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"title",storageKey:null,args:null,concreteType:"TextWithEntities",plural:false,selections:n},{kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_live_streaming",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permalink_url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"playable_duration",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"live_viewer_count_read_only",args:null,storageKey:null}]}]}]},{kind:"ScalarField",alias:null,name:"tracking",args:null,storageKey:null}]}]}]}]}]},k]}]}}}();f.exports=h}),null);
__d("TahoeUpNextTab_query.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Fragment",name:"TahoeUpNextTab_query",type:"Query",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"entry_point",type:"VideoChannelEntryPoint",defaultValue:null},{kind:"LocalArgument",name:"caller",type:"VideoChainingCaller",defaultValue:"tahoe"},{kind:"LocalArgument",name:"count",type:"Int",defaultValue:20},{kind:"LocalArgument",name:"scale",type:"Float",defaultValue:null}],selections:[{kind:"LinkedField",alias:null,name:"video",storageKey:null,args:[{kind:"Variable",name:"id",variableName:"id",type:"ID!"}],concreteType:"Video",plural:false,selections:[{kind:"LinkedField",alias:null,name:"video_channel",storageKey:null,args:[{kind:"Variable",name:"entry_point",variableName:"entry_point",type:"VideoChannelEntryPoint"}],concreteType:null,plural:false,selections:[i,{kind:"LinkedField",alias:null,name:"video_channel_feed",storageKey:null,args:[{kind:"Variable",name:"caller",variableName:"caller",type:"VideoChainingCaller"},{kind:"Variable",name:"first",variableName:"count",type:"Int"}],concreteType:"VideoChannelFeedConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"VideoChannelFeedEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"FragmentSpread",name:"TahoeUpNextVideoUnit_story",args:[{kind:"Variable",name:"scale",variableName:"scale",type:null}]},{kind:"InlineFragment",type:"Story",selections:[{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:true,selections:[{kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"InlineFragment",type:"Video",selections:[i]}]}]}]}]}]}]}]}]}]}}();f.exports=h}),null);
__d("TahoeUpNextVideoUnitMetadata_video.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h={kind:"Fragment",name:"TahoeUpNextVideoUnitMetadata_video",type:"Video",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"broadcast_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"live_viewer_count_read_only",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"InlineFragment",type:"Page",selections:[{kind:"ScalarField",alias:"page_is_blue_verified",name:"is_verified",args:null,storageKey:null},{kind:"ScalarField",alias:"page_is_gray_verified",name:"is_verified_page",args:null,storageKey:null}]},{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:"user_is_blue_verified",name:"is_verified",args:null,storageKey:null}]}]},{kind:"ScalarField",alias:null,name:"permalink_url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"play_count",args:null,storageKey:null}]};f.exports=h}),null);
__d("TahoeUpNextVideoUnitThumbnail_video.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h={kind:"Fragment",name:"TahoeUpNextVideoUnitThumbnail_video",type:"Video",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"scale",type:"Float",defaultValue:null}],selections:[{kind:"ScalarField",alias:null,name:"is_live_streaming",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permalink_url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"playable_duration",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"preferred_thumbnail",storageKey:null,args:null,concreteType:"VideoThumbnail",plural:false,selections:[{kind:"LinkedField",alias:"small_image",name:"image",storageKey:null,args:[{kind:"Literal",name:"height",value:172,type:"Int"},{kind:"Variable",name:"scale",variableName:"scale",type:"Float"},{kind:"Literal",name:"width",value:172,type:"Int"}],concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]}]}]};f.exports=h}),null);
__d("TahoeUpNextVideoUnit_story.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},j=[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}];return{kind:"Fragment",name:"TahoeUpNextVideoUnit_story",type:"Story",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"scale",type:"Float",defaultValue:null}],selections:[{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:true,selections:[{kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"FragmentSpread",name:"TahoeUpNextVideoUnitThumbnail_video",args:[{kind:"Variable",name:"scale",variableName:"scale",type:null}]},{kind:"FragmentSpread",name:"TahoeUpNextVideoUnitMetadata_video",args:null},{kind:"InlineFragment",type:"Video",selections:[{kind:"ScalarField",alias:null,name:"broadcast_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},i,{kind:"LinkedField",alias:null,name:"message",storageKey:null,args:null,concreteType:"TextWithEntities",plural:false,selections:j},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:null,plural:false,selections:[i,{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"play_count",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"preferred_thumbnail",storageKey:null,args:null,concreteType:"VideoThumbnail",plural:false,selections:[{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:[{kind:"Literal",name:"height",value:714,type:"Int"},{kind:"Variable",name:"scale",variableName:"scale",type:"Float"},{kind:"Literal",name:"width",value:714,type:"Int"}],concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]}]},{kind:"LinkedField",alias:null,name:"title",storageKey:null,args:null,concreteType:"TextWithEntities",plural:false,selections:j},{kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null}]}]}]},{kind:"ScalarField",alias:null,name:"tracking",args:null,storageKey:null}]}}();f.exports=h}),null);
__d("VideoPlaybackProgressTracker",[],(function a(b,c,d,e,f,g){"use strict";var h={onPercentageWatched:function i(j,k,l){j.addListener("updateStatus",function(event){var m=j.getPlaybackDuration(),n=m&&event.position/m*100;if(n>k){j.removeCurrentListener();l()}})}};f.exports=h}),null);
__d("TahoeActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({SET_MC:null});f.exports=h}),null);
__d("TahoeDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d("TahoeActions",["TahoeDispatcher","TahoeActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h={setMediaController:function i(j){var k={type:c("TahoeActionTypes").SET_MC,mediaController:j};c("TahoeDispatcher").dispatch(k)}};f.exports=h}),null);
__d("TahoeMediaType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({VIDEO:"video",PHOTO:"photo"})}),null);
__d("TahoePhotoSurfaces",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FEED:"feed",SEARCH:"search"})}),null);
__d("TahoeSidePanePhotosPlaceholder.react",["cx","React"],(function a(b,c,d,e,f,g,h){function i(){return c("React").createElement("div",{className:"_wxj _1-z7"},c("React").createElement("div",{className:"_1kna"}),c("React").createElement("div",{className:"_1knc"}),c("React").createElement("div",{className:"_1knd"}),c("React").createElement("div",{className:"_1kne"}),c("React").createElement("div",{className:"_1knf"}),c("React").createElement("div",{className:"_1kng"}),c("React").createElement("div",{className:"_2kmf"}),c("React").createElement("div",{className:"_2kmg"}),c("React").createElement("div",{className:"_2kmh"}))}f.exports=i}),null);
__d("TahoeView",["csx","cx","CSS","DOM","DOMQuery","Event","EventProfiler","Keys","SubscriptionsHandler","TabBar","Tahoe"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l,m){"use strict";this.$TahoeView4=k;this.$TahoeView5=this.$TahoeView4.getID()}j.prototype.$TahoeView12=function(){"use strict";c("CSS").addClass(this.$TahoeView8,"_4f4w");c("DOM").empty(this.$TahoeView10)};j.prototype.$TahoeView13=function(){"use strict";c("CSS").removeClass(this.$TahoeView8,"_4f4w");if(this.$TahoeView11){var k=c("DOM").find(this.$TahoeView8,"._3dj6");c("CSS").removeClass(k,"_3dj6");c("DOM").setContent(k,c("DOM").find(this.$TahoeView6,"._3dj7"));c("EventProfiler").informManualInteractionTimestamp(["Tahoe"],true,"click");this.$TahoeView11=false}};j.prototype.$TahoeView14=function(event){"use strict";if(event.keyCode===c("Keys").ESC&&!event.cancelBubble&&!event.defaultPrevented)this.$TahoeView4.onExit()};j.prototype.selectAddComment=function(){"use strict";var k=c("DOMQuery").scry(this.$TahoeView8,".UFIAddCommentInput");if(k[0]!=null)k[0].click();this.selectCommentTab()};j.prototype.selectCommentTab=function(){"use strict";var k=c("DOM").find(this.$TahoeView8,"._1rgu");c("CSS").addClass(k,"_601h");c("CSS").removeClass(k,"_601i")};j.prototype.selectUpNextTab=function(){"use strict";var k=c("DOM").find(this.$TahoeView8,"._1rgu");if(k!=null){c("CSS").addClass(k,"_601i");c("CSS").removeClass(k,"_601h")}};j.prototype.setUpNextVideoIDs=function(k){"use strict"};j.prototype.setUpNextChainingInfoFromReactElement=function(k){"use strict"};j.registerCommentLink=function(k){"use strict";var l=c("Tahoe").get();if(l)l.addEvent(c("Event").listen(k,"click",function(){return l.getView().selectAddComment()}))};f.exports=j}),null);
__d("XTahoeAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/tahoe/async/{id}/",{id:{type:"FBID",required:true},chain:{type:"Bool",defaultValue:false},externallogid:{type:"String"},isvideo:{type:"Bool",defaultValue:false},sponsoreddata:{type:"String"},originalmediaid:{type:"String"},preload:{type:"Bool",defaultValue:false},playerorigin:{type:"Enum",enumType:1},playersuborigin:{type:"String"},reactionvideochanneltype:{type:"Enum",enumType:1},reactionvideochannelsubtype:{type:"String"},ispermalink:{type:"Bool",defaultValue:false},feedtracking:{type:"StringVector",defaultValue:[]},storyidentifier:{type:"String"}})}),null);
__d("XTahoeMorePhotosAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/tahoe/morephotos/async/{current_photo_id}/",{related_results:{type:"FBIDVector",required:true},current_photo_id:{type:"FBID",required:true}})}),null);
__d("TahoePhotoView",["csx","cx","Arbiter","AsyncRequest","AsyncResponse","CSS","DOM","DOMQuery","Event","EventProfiler","HTML","Keys","React","ReactDOM","MediaController","PhotoPermalinkURI","SubscriptionsHandler","TabBar","Tahoe","TahoePhotoSurfaces","TahoeSidePanePhotosPlaceholder.react","TahoeView","URI","XTahoeAsyncController","XTahoeMorePhotosAsyncController"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("TahoeView"));k=j&&j.prototype;function l(m,n){"use strict";__p&&__p();k.constructor.call(this,m);this.onMediaFetchResponse=function(o){__p&&__p();var p=o.getPayload();if(p.chain){var q=this.getCleanMediaContainer(),r=c("DOMQuery").scry(this.$TahoePhotoView11,"._1rgu");c("DOM").prependContent(q,c("HTML").replaceJSONWrapper(p.photo.markup));c("DOM").setContent(this.$TahoePhotoView13,c("HTML").replaceJSONWrapper(p.ufiTray.markup));if(r[0])c("DOM").replace(r[0],c("HTML").replaceJSONWrapper(p.sidePane.markup));else c("DOM").appendContent(this.$TahoePhotoView11,c("HTML").replaceJSONWrapper(p.sidePane.markup))}else{c("DOM").appendContent(this.$TahoePhotoView13,c("HTML").replaceJSONWrapper(p.ufiTray.markup));c("DOM").appendContent(this.$TahoePhotoView11,c("HTML").replaceJSONWrapper(p.sidePane.markup))}this.$TahoePhotoView20();c("EventProfiler").informManualInteractionTimestamp(["Tahoe"],true,"click")}.bind(this);this.$TahoePhotoView5=m;this.$TahoePhotoView4=n;this.$TahoePhotoView8=this.$TahoePhotoView5.getID();this.$TahoePhotoView6=this.$TahoePhotoView5.getRelatedResultIDs().indexOf(this.$TahoePhotoView8);this.$TahoePhotoView7=false;this.$TahoePhotoView5.addEvent(c("Event").listen(document,"keydown",this.$TahoePhotoView14.bind(this)));this.build(n);if(this.$TahoePhotoView5.getMediaController()){this.$TahoePhotoView15(this.$TahoePhotoView5.getID(),false);this.setUpUFI()}else this.updateView(this.$TahoePhotoView5.getID());this.$TahoePhotoView1=new(c("SubscriptionsHandler"))();this.$TahoePhotoView1.addSubscriptions(c("Arbiter").subscribe("layer_shown",this.$TahoePhotoView16.bind(this)),c("Arbiter").subscribe("UFIAddComment/focus",this.selectCommentTab.bind(this)))}l.prototype.build=function(m){"use strict";__p&&__p();this.$TahoePhotoView13=c("CSS").setClass(c("DOM").create("div"),"_1e8c _2b-0");this.$TahoePhotoView11=c("CSS").setClass(c("DOM").create("div"),"_5-lm _3aw0");this.$TahoePhotoView3=c("CSS").setClass(c("DOM").create("div"),"_17am");this.$TahoePhotoView9=c("CSS").setClass(c("DOM").create("div"),"hidden_elem");c("ReactDOM").render(c("React").createElement(c("TahoeSidePanePhotosPlaceholder.react"),null),this.$TahoePhotoView11);var n=this.$TahoePhotoView5.getContent();c("CSS").addClass(n,"_2sts");c("DOM").appendContent(n,this.$TahoePhotoView13);c("DOM").appendContent(this.$TahoePhotoView5.getSideContent(),this.$TahoePhotoView11);c("DOM").appendContent(n,this.$TahoePhotoView9);if(this.$TahoePhotoView5.getMediaController()){this.$TahoePhotoView15(this.$TahoePhotoView5.getID(),false);this.setUpUFI()}else this.updateView(this.$TahoePhotoView5.getID());this.renderPlaceholder()};l.prototype.showPreloadedImage=function(m){"use strict";var n=c("CSS").setClass(c("DOM").create("div"),"_6449");c("DOM").appendContent(n,m);c("DOM").prependContent(this.getCleanMediaContainer(),n)};l.prototype.$TahoePhotoView16=function(m,n){"use strict"};l.prototype.setUpUFI=function(){"use strict";var m=this.$TahoePhotoView5.getMediaController();if(m)this.$TahoePhotoView5.addEvent(m.addListener("commercialBreak/showUFI",function(){return this.$TahoePhotoView17(false)}.bind(this)))};l.prototype.$TahoePhotoView17=function(m){"use strict";if(m)c("CSS").addClass(this.$TahoePhotoView3,"_17an");else c("CSS").removeClass(this.$TahoePhotoView3,"_17an")};l.prototype.$TahoePhotoView18=function(){"use strict"};l.prototype.$TahoePhotoView19=function(){"use strict";c("CSS").addClass(this.$TahoePhotoView11,"_4f4w");c("DOM").empty(this.$TahoePhotoView13)};l.prototype.$TahoePhotoView20=function(){"use strict";c("CSS").removeClass(this.$TahoePhotoView11,"_4f4w");if(this.$TahoePhotoView7){var m=c("DOMQuery").find(this.$TahoePhotoView11,"._3t0r");m=c("CSS").removeClass(m,"_3t0r");c("DOM").setContent(m,c("DOMQuery").find(this.$TahoePhotoView9,"._3t0v"));c("EventProfiler").informManualInteractionTimestamp(["Tahoe"],true,"click");this.$TahoePhotoView7=false}};l.prototype.$TahoePhotoView14=function(m){"use strict";__p&&__p();if(m.keyCode===c("Keys").ESC&&!m.cancelBubble&&!m.defaultPrevented)this.$TahoePhotoView5.onExit();else if(m.keyCode===c("Keys").RIGHT&&this.$TahoePhotoView6>=0&&this.$TahoePhotoView6<this.$TahoePhotoView5.getRelatedResultIDs().length-1){this.$TahoePhotoView6++;var n=this.$TahoePhotoView5.getRelatedResultIDs()[this.$TahoePhotoView6];this.updateView(n)}else if(m.keyCode===c("Keys").LEFT&&this.$TahoePhotoView6>0){this.$TahoePhotoView6--;var o=this.$TahoePhotoView5.getRelatedResultIDs()[this.$TahoePhotoView6];this.updateView(o)}};l.prototype.$TahoePhotoView15=function(m,n,o){"use strict";__p&&__p();this.$TahoePhotoView2=null;var p=c("XTahoeAsyncController").getURIBuilder().setFBID("id",m).setBool("isvideo",false).setBool("chain",n).setString("originalmediaid",this.$TahoePhotoView8).setString("sponsoreddata",o),q=new(c("AsyncRequest"))(p.getURI()).setHandler(this.onMediaFetchResponse),r=this.$TahoePhotoView21(m);q.setAllowCrossPageTransition(true);q.send();if(r!=null){r.setAllowCrossPageTransition(true);r.send()}this.$TahoePhotoView19()};l.prototype.getCleanMediaContainer=function(){"use strict";var m=this.$TahoePhotoView5.getContent(),n=c("DOMQuery").scry(m,"._5-yb,._6449");if(n&&n.length)n.forEach(function(o){return c("DOM").remove(o)});return m};l.prototype.$TahoePhotoView21=function(m){"use strict";if(this.$TahoePhotoView4.surface===c("TahoePhotoSurfaces").SEARCH)this.$TahoePhotoView22(m)};l.prototype.$TahoePhotoView22=function(m){"use strict";__p&&__p();var n=this.$TahoePhotoView5.getRelatedResultIDs();if(n!=null)n=n.map(function(q){return q.toString()});var o=c("XTahoeMorePhotosAsyncController").getURIBuilder().setFBID("current_photo_id",m).setFBIDVector("related_results",n),p=new(c("AsyncRequest"))(o.getURI()).setHandler(function(q){__p&&__p();var r=q.getPayload(),s=c("HTML").replaceJSONWrapper(r.morePhotosUnit.markup);this.$TahoePhotoView7=true;var t=c("DOMQuery").scry(this.$TahoePhotoView9,"._3t0v")[0];if(t!=null)c("DOM").remove(this.$TahoePhotoView9);var u=c("DOMQuery").scry(this.$TahoePhotoView11,"._3t0r")[0];if(u!=null){c("CSS").removeClass(u,"_3dj6");c("DOM").setContent(u,s);this.$TahoePhotoView7=false}else c("DOM").setContent(this.$TahoePhotoView9,s)}.bind(this));return p};l.prototype.selectAddComment=function(){"use strict";var m=c("DOMQuery").scry(this.$TahoePhotoView11,".UFIAddCommentInput");m[0]&&m[0].click();this.selectCommentTab()};l.prototype.selectCommentTab=function(){"use strict";var m=c("DOMQuery").scry(this.$TahoePhotoView11,"._1rgu")[0];c("CSS").addClass(m,"_601h");c("CSS").removeClass(m,"_1db2")};l.prototype.selectMorePhotosTab=function(){"use strict";var m=c("DOMQuery").scry(this.$TahoePhotoView11,"._1rgu")[0];if(m){c("CSS").addClass(m,"_1db2");c("CSS").removeClass(m,"_601h")}};l.prototype.updateView=function(m,n,o){var p=arguments.length<=3||arguments[3]===undefined?null:arguments[3];"use strict";var q=c("DOMQuery").scry(this.$TahoePhotoView9,"#preload-"+m);if(q[0])this.$TahoePhotoView23();else{this.$TahoePhotoView23();this.$TahoePhotoView15(m,true,p)}};l.prototype.$TahoePhotoView23=function(){"use strict";c("DOM").empty(this.$TahoePhotoView9)};l.prototype.onExit=function(){"use strict"};l.prototype.renderPlaceholder=function(){"use strict";if(this.$TahoePhotoView4.preloadedImage!=null)this.showPreloadedImage(this.$TahoePhotoView4.preloadedImage)};l.registerCommentLink=function(m){"use strict";j.registerCommentLink.call(this,m)};l.registerSidepaneTabbar=function(m){__p&&__p();var n;"use strict";var o=c("Tahoe").get();if(o!=null)(function(){var p=o.getView();if(p instanceof l)m.subscribe(c("TabBar").TAB_CLICK,function(q,r){switch(r){case"more-photos":p.selectMorePhotosTab();break;case"comments":p.selectCommentTab()}})})()};l.handleMorePhotosUnitClick=function(m){"use strict";__p&&__p();var n=c("Tahoe").get();if(n==null)throw new Error("TahoePhotoView should always have a TahoeController");else{var o=n.getView();if(o instanceof l){var p=c("PhotoPermalinkURI").parse(new(c("URI"))(m.getAttribute("href")));if(p!=null){var q=p.photo_id;o.updateView(q)}}}};l.loadView=function(m,n){"use strict";return new l(m,n)};f.exports=l}),null);
__d("TahoeVideoStore",["TahoeDispatcher","FluxMapStore","immutable","TahoeActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxMapStore"));i=h&&h.prototype;j.prototype.reduce=function(k,l){switch(l.type){case c("TahoeActionTypes").SET_MC:k=k.set("mediaController",l.mediaController);break;default:break}return k};function j(){h.apply(this,arguments)}f.exports=new j(c("TahoeDispatcher"))}),null);
__d("TahoeFollowButtonNUX.react",["fbt","React","XUIAmbientNUX.react","LayerFadeOnHide","LayerFadeOnShow"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={shown:true},m}k.prototype.hide=function(){this.setState({shown:false})};k.prototype.render=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{context:this.props.context,shown:this.state.shown,position:"below",onCloseButtonClick:function(){return this.setState({shown:false})}.bind(this),alignment:"right",behaviors:{LayerFadeOnHide:c("LayerFadeOnHide"),LayerFadeOnShow:c("LayerFadeOnShow")}},h._("Follow to get new episodes in your watchlist"))};f.exports=k}),null);
__d("TahoeUpNextUnitPlaceholder.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";function i(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_27do"}),c("React").createElement("div",{className:"_27dr"}),c("React").createElement("div",{className:"_27em"}),c("React").createElement("div",{className:"_27en"}))}f.exports=i}),null);
__d("TahoeSidePanePlaceholder.react",["cx","React","TahoeUpNextUnitPlaceholder.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_wxj _1-z7"},c("React").createElement("div",{className:"_1kna"}),c("React").createElement("div",{className:"_1knc"}),c("React").createElement("div",{className:"_1knd"}),c("React").createElement("div",{className:"_1kne"}),c("React").createElement("div",{className:"_1knf"}),c("React").createElement("div",{className:"_1kng"}),c("React").createElement(c("TahoeUpNextUnitPlaceholder.react"),null))};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("TahoeEndScreenProgressCircle.react",["cx","React","ReactDOM","Style"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$TahoeEndScreenProgressCircle1=null,this.$TahoeEndScreenProgressCircle2=0,this.$TahoeEndScreenProgressCircle3=0,n}l.prototype.componentDidMount=function(){"use strict";this.$TahoeEndScreenProgressCircle3=this.$TahoeEndScreenProgressCircle2;this.drawProgressCircle(this.props)};l.prototype.componentWillUnmount=function(){"use strict";clearInterval(this.$TahoeEndScreenProgressCircle1)};l.prototype.componentWillReceiveProps=function(m){"use strict";if(m.makeProgress!==this.props.makeProgress||m.timeoutSec!==this.props.timeoutSec)this.drawProgressCircle(m)};l.prototype.drawProgressCircle=function(m){"use strict";__p&&__p();clearInterval(this.$TahoeEndScreenProgressCircle1);var n=c("ReactDOM").findDOMNode(this.refs.progressCircle);if(m.timeoutSec===0){c("Style").set(n,"stroke-dashoffset",this.$TahoeEndScreenProgressCircle2+"px");return}var o=this.$TahoeEndScreenProgressCircle2/100;c("Style").set(n,"stroke-dashoffset",this.$TahoeEndScreenProgressCircle3+"px");if(m.makeProgress)this.$TahoeEndScreenProgressCircle1=setInterval(function(){this.$TahoeEndScreenProgressCircle3-=o;c("Style").set(n,"stroke-dashoffset",this.$TahoeEndScreenProgressCircle3+"px");if(this.$TahoeEndScreenProgressCircle3<=0){clearInterval(this.$TahoeEndScreenProgressCircle1);c("Style").set(n,"stroke-dashoffset","0px");m.onProgressDone&&m.onProgressDone()}}.bind(this),m.timeoutSec*10)};l.prototype.render=function(){"use strict";var m=this.props.circleDiameter,n=4,o=m/2,p=o-n/2;this.$TahoeEndScreenProgressCircle2=p*2*Math.PI;return c("React").createElement("div",null,c("React").createElement("svg",{className:"_4bcw",style:{height:m,width:m}},c("React").createElement("circle",{cx:o,cy:o,r:o,fill:"rgba(0, 0, 0, 0.3)"}),c("React").createElement("circle",{ref:"progressCircle",cx:o,cy:o,r:p,fill:"transparent",stroke:"#ffffff",strokeWidth:n,strokeDasharray:this.$TahoeEndScreenProgressCircle2})),this.props.children)};l.propTypes={children:k.element,makeProgress:k.bool.isRequired,onProgressDone:k.func,timeoutSec:k.number.isRequired};l.defaultProps={circleDiameter:48};f.exports=l}),null);
__d("TahoeVideoFloatingReplayImage.react",["ix","cx","fbt","AbstractButton.react","Image.react","React","ReactDOM","Tooltip","VideoWebDriverIDs","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.onMouseOut=function(n){"use strict";c("ReactDOM").findDOMNode(this.refs.button).blur()};m.prototype.render=function(){"use strict";var n=h("115482"),o=j._("Replay"),p=c("React").createElement(c("Image.react"),babelHelpers["extends"]({className:"_ity",src:n},c("Tooltip").propsFor(j._("Play Again"))));return c("React").createElement(c("AbstractButton.react"),{className:"_itz","data-testid":c("VideoWebDriverIDs").PLAY_PAUSE_CONTROL,image:p,label:o,labelIsHidden:true,onClick:this.props.onClick,onMouseOut:this.onMouseOut.bind(this),ref:"button",type:"button"})};function m(){"use strict";k.apply(this,arguments)}f.exports=m}),null);
__d("XTahoeVideoDataAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/tahoe/video_data/",{video_ids:{type:"FBIDSet",required:true}})}),null);
__d("TahoeGridViewEndScreen.react",["cx","fbt","AsyncRequest","CenteredContainer.react","Image.react","LineClamp.react","Link.react","React","ReactDOM","ResizeListener","TahoeLoggerEvent","TahoeVideoFloatingReplayImage.react","UFIReactionsBlingTokens.react","URI","VideoDuration.react","XTahoeVideoDataAsyncController","XUIText.react","idx","intlSummarizeNumber"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=3,m=616,n=450,o=.6,p=16/9,q=44,r=98,s=8;j=babelHelpers.inherits(t,c("React").Component);k=j&&j.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=k.constructor).call.apply(u,[this].concat(x)),this.$TahoeGridViewEndScreen1=null,this.$TahoeGridViewEndScreen2=null,this.state={videosData:null,gridItemsCount:0,itemWidth:0,rootHorizPadding:q},v}t.prototype.componentDidMount=function(){this.$TahoeGridViewEndScreen2=c("ResizeListener").add(function(){return this.$TahoeGridViewEndScreen3()}.bind(this));if(this.props.videoIDs.length>0)new(c("AsyncRequest"))(c("XTahoeVideoDataAsyncController").getURIBuilder().setFBIDSet("video_ids",this.props.videoIDs).getURI()).setHandler(function(u){var v,w=(v=u)!=null?(v=v.payload)!=null?v.videosData:v:v;this.setState({videosData:w?w:[]});this.$TahoeGridViewEndScreen3()}.bind(this)).send();this.props.logEvent(c("TahoeLoggerEvent").GRID_VIEW_END_SCREEN_SHOWN)};t.prototype.componentWillUnmount=function(){this.$TahoeGridViewEndScreen2&&this.$TahoeGridViewEndScreen2.remove()};t.prototype.render=function(){var u=this.state.videosData;if(this.props.videoIDs.length===0||u&&u.length===0)return c("React").createElement(c("CenteredContainer.react"),{fullHeight:true,horizontal:true,vertical:true},c("React").createElement("div",{className:"_2gqa"},c("React").createElement(c("Image.react"),{onClick:this.props.onReplay,src:"/images/video/channel_view/replay.svg"})));return c("React").createElement(c("CenteredContainer.react"),{fullHeight:true,horizontal:true,vertical:true,ref:function(v){this.$TahoeGridViewEndScreen1=v}.bind(this),style:{padding:"0 "+this.state.rootHorizPadding/2+"px"}},u?c("React").createElement("div",{className:"_1vgj"},c("React").createElement("div",{className:"_2pip"},c("React").createElement(c("XUIText.react"),{className:"_2oqk",size:"xlarge_DEPRECATED",weight:"bold"},i._("More videos you may like"))),u.slice(0,this.state.gridItemsCount).map(function(v){return this.$TahoeGridViewEndScreen4(v)}.bind(this))):null,c("React").createElement(c("TahoeVideoFloatingReplayImage.react"),{onClick:function(){this.props.logEvent(c("TahoeLoggerEvent").END_SCREEN_REPLAY);this.props.onReplay()}.bind(this)}))};t.prototype.$TahoeGridViewEndScreen3=function(){var u=this.$TahoeGridViewEndScreen1&&c("ReactDOM").findDOMNode(this.$TahoeGridViewEndScreen1);if(!u||!u instanceof Element)return;var v=this.state.videosData&&this.state.videosData.length;if(!v)return;var w=u.clientWidth,x=u.clientHeight,y=this.$TahoeGridViewEndScreen5(v,w,x),z=this.$TahoeGridViewEndScreen6(y,w,x);this.setState({gridItemsCount:y,itemWidth:z})};t.prototype.$TahoeGridViewEndScreen5=function(u,v,w){if(v>=m&&w>=n&&u>=9)return 9;return u>=4?4:1};t.prototype.$TahoeGridViewEndScreen6=function(u,v,w){if(u===1)return v*o;var x=v-q,y=w-r,z=Math.sqrt(u),A=Math.min(x/z,y/z*p),B=v-A*z;this.setState({rootHorizPadding:B});A-=s;return isNaN(A)?0:A};t.prototype.$TahoeGridViewEndScreen4=function(u){var v,w;if(!u.id||!u.permalink||!u.thumbURI)return null;var x=(v=u)!=null?(v=v.socialContext)!=null?v.feedback:v:v,y=(w=u)!=null?(w=w.socialContext)!=null?w.contextArgs:w:w,z=this.state.gridItemsCount,A=this.state.itemWidth;return c("React").createElement("div",{key:u.id,className:"_1iwg"+(z===4?" _64h7":"")+(z===9?" _64h8":"")},c("React").createElement(c("Link.react"),{href:new(c("URI"))(u.permalink),onClick:function(){return this.props.logEvent(c("TahoeLoggerEvent").GRID_VIEW_END_SCREEN_CLICK_VIDEO)}.bind(this)},c("React").createElement("div",{className:"_1iwh"},A>0?c("React").createElement(c("Image.react"),{src:u.thumbURI,height:A/p,width:A}):c("React").createElement(c("Image.react"),{src:u.thumbURI,className:"_1iwi"}),c("React").createElement("div",{className:"_1iwj"},u.title?c("React").createElement("div",{className:"_64dj"},c("React").createElement(c("LineClamp.react"),{lines:2,fitHeightToShorterText:true},c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},u.title))):null,c("React").createElement("div",{className:"_64dn"},u.viewCount>0?c("React").createElement(c("XUIText.react"),{size:"meta1",className:"_64dj _2pij"},i._({"*":"{number} views","_1":"1 view"},[i.plural(u.viewCount,"number",c("intlSummarizeNumber")(u.viewCount))])):null,x&&y?c("React").createElement("div",{className:"_4ar- _64do _64dj _64dp"},c("React").createElement(c("UFIReactionsBlingTokens.react"),{feedback:x,contextArgs:y,max:l,size:"16",noLinks:true},c("React").createElement("div",null,x.reactioncountreduced))):null,c("React").createElement("div",{className:"_2exg"},c("React").createElement(c("VideoDuration.react"),{duration:u.duration,isLive:u.isLive})))))))};f.exports=t}),null);
__d("TahoeUpNextOverlayAndEndScreen.react",["cx","fbt","ix","AsyncRequest","Badge.react","CenteredContainer.react","Image.react","Layout.react","LineClamp.react","Link.react","React","SubscriptionsHandler","TahoeEndScreenProgressCircle.react","TahoeLoggerEvent","TahoeGridViewEndScreen.react","URI","VideoDuration.react","VideoPlayerReason","VideoPlayerStates","XTahoeVideoDataAsyncController","XUIText.react","XUIGrayText.react","areEqual","asset","idx","intlSummarizeNumber"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("Layout.react").Column,n=c("Layout.react").FillColumn,o=145,p=257,q=52;k=babelHelpers.inherits(r,c("React").Component);l=k&&k.prototype;function r(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=l.constructor).call.apply(s,[this].concat(v)),this.state={shown:true,videoData:null,makeProgress:true,isDismissed:false,isVideoFinished:false,isInTahoe:this.props.vpc.getSource()==="tahoe"},t}r.prototype.componentDidMount=function(){__p&&__p();if(this.props.videoIDs.length>0)new(c("AsyncRequest"))(c("XTahoeVideoDataAsyncController").getURIBuilder().setFBIDSet("video_ids",[this.props.videoIDs[0]]).getURI()).setHandler(function(s){var t,u=(t=s)!=null?(t=t.payload)!=null?t.videosData:t:t;if(u&&u.length>0)this.setState({videoData:u[0]})}.bind(this)).send();this.$TahoeUpNextOverlayAndEndScreen1=new(c("SubscriptionsHandler"))();this.$TahoeUpNextOverlayAndEndScreen1.addSubscriptions(this.props.vpc.addListener("stateChange",function(){return this.$TahoeUpNextOverlayAndEndScreen2()}.bind(this)));this.$TahoeUpNextOverlayAndEndScreen1.addSubscriptions(this.props.vpc.addListener("TahoeController/exitTahoe",function(){this.setState({isInTahoe:false})}.bind(this)));this.$TahoeUpNextOverlayAndEndScreen1.addSubscriptions(this.props.vpc.addListener("TahoeController/enterTahoe",function(){this.setState({isInTahoe:true})}.bind(this)));this.props.logEvent(c("TahoeLoggerEvent").UP_NEXT_OVERLAY_SHOWN)};r.prototype.componentWillUnmount=function(){this.$TahoeUpNextOverlayAndEndScreen1.release()};r.prototype.shouldComponentUpdate=function(s,t){return!c("areEqual")(this.state,t)};r.prototype.render=function(){if(!this.state.isInTahoe)return null;var s=null;if(this.state.isVideoFinished)s=this.state.isDismissed||this.props.videoIDs.length===0?this.$TahoeUpNextOverlayAndEndScreen3():this.$TahoeUpNextOverlayAndEndScreen4();return c("React").createElement("div",{className:"_1a5j"},s,this.$TahoeUpNextOverlayAndEndScreen5())};r.prototype.$TahoeUpNextOverlayAndEndScreen5=function(){var s=this.state.videoData;if(!s)return null;return c("React").createElement(c("Layout.react"),{className:"_64gd"+(!this.state.shown?" _1yks":"")},c("React").createElement(m,null,c("React").createElement(c("Link.react"),{onClick:function(){return this.$TahoeUpNextOverlayAndEndScreen6(false)}.bind(this)},c("React").createElement(c("Image.react"),{src:s.thumbURI,height:o,width:p}),c("React").createElement(c("CenteredContainer.react"),{className:"_4m5g",horizontal:true,vertical:true,fullHeight:true},c("React").createElement("div",{className:"_4m83"},c("React").createElement(c("TahoeEndScreenProgressCircle.react"),{makeProgress:this.state.makeProgress,circleDiameter:q,onProgressDone:function(){return this.$TahoeUpNextOverlayAndEndScreen6(true)}.bind(this),timeoutSec:this.props.countdownTimeoutSec},c("React").createElement(c("Image.react"),{className:"_4m8c",src:j("101657")})),c("React").createElement("div",{className:"_4m8d"},i._("UP NEXT")))),c("React").createElement("div",{className:"_4m8e"},c("React").createElement(c("VideoDuration.react"),{isLive:s.isLive,duration:s.duration})))),c("React").createElement(n,{className:"_64ge"},c("React").createElement("div",{className:"_64gf"},s.title?c("React").createElement("div",{className:"_64gj"},c("React").createElement(c("Link.react"),{onClick:function(){return this.$TahoeUpNextOverlayAndEndScreen6(false)}.bind(this)},c("React").createElement(c("LineClamp.react"),{lines:3,fitHeightToShorterText:true,enableTooltipOnOverflow:true},c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},s.title)))):null,s.ownerName?c("React").createElement("div",{className:"_2pim"},c("React").createElement(c("LineClamp.react"),{lines:1,enableTooltipOnOverflow:true},c("React").createElement(c("XUIGrayText.react"),{size:"meta1"},s.ownerName),this.$TahoeUpNextOverlayAndEndScreen7(s))):null,s.viewCount>0?c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},i._({"*":"{number} views","_1":"1 view"},[i.plural(s.viewCount,"number",c("intlSummarizeNumber")(s.viewCount))])):null),c("React").createElement("div",{className:"_64gk"},c("React").createElement(c("Link.react"),{onClick:function(){return this.$TahoeUpNextOverlayAndEndScreen8()}.bind(this)},c("React").createElement(c("Image.react"),{className:"_64gl",src:j("368787")}),c("React").createElement(c("XUIText.react"),{className:"_64gl _2pir",size:"header3"},i._("Cancel"))))))};r.prototype.$TahoeUpNextOverlayAndEndScreen7=function(s){var t=s.isOwnerBlueVerified,u=s.isOwnerGrayVerified;if(!t&&!u)return null;return c("React").createElement("span",{className:"_3h80"},t?c("React").createElement(c("Badge.react"),{size:"small",type:"verified"}):c("React").createElement(c("Badge.react"),{size:"small",type:"page_gray_check"}))};r.prototype.$TahoeUpNextOverlayAndEndScreen9=function(){this.setState({shown:false,makeProgress:false})};r.prototype.$TahoeUpNextOverlayAndEndScreen8=function(){this.$TahoeUpNextOverlayAndEndScreen9();this.setState({isDismissed:true});this.props.logEvent(c("TahoeLoggerEvent").UP_NEXT_OVERLAY_CANCEL)};r.prototype.$TahoeUpNextOverlayAndEndScreen6=function(s){var t;this.$TahoeUpNextOverlayAndEndScreen9();this.props.tahoeController.setPlayReason(s?c("VideoPlayerReason").AUTOPLAY:c("VideoPlayerReason").USER);var u=(t=this.state)!=null?(t=t.videoData)!=null?t.permalink:t:t;u&&c("URI").go(u);s?this.props.logEvent(c("TahoeLoggerEvent").UP_NEXT_OVERLAY_REDIRECT_ON_COUNTDOWN_FINISHED):this.props.logEvent(c("TahoeLoggerEvent").UP_NEXT_OVERLAY_REDIRECT_ON_CLICK)};r.prototype.$TahoeUpNextOverlayAndEndScreen2=function(){__p&&__p();var s=this.props.vpc,t=s.getState();switch(t){case c("VideoPlayerStates").PAUSED:this.setState({makeProgress:false});break;case c("VideoPlayerStates").PLAYING:this.setState({makeProgress:true});break;case c("VideoPlayerStates").FINISHED:this.setState({isVideoFinished:true});if(!this.state.isDismissed&&!this.state.makeProgress)this.setState({makeProgress:true});break}};r.prototype.$TahoeUpNextOverlayAndEndScreen3=function(){return c("React").createElement("div",{className:"_3rl2 _2se8"},c("React").createElement(c("TahoeGridViewEndScreen.react"),{videoIDs:this.props.videoIDs,onReplay:function(){this.props.vpc.play(c("VideoPlayerReason").USER)}.bind(this),logEvent:this.props.logEvent}),",")};r.prototype.$TahoeUpNextOverlayAndEndScreen4=function(){return c("React").createElement("div",{className:"_3rl2 _zkf"})};f.exports=r}),null);
__d("TahoeUpNextVideoUnitMetadata.react",["cx","fbt","Badge.react","InlineBlock.react","LineClamp.react","Link.react","React","VideoBroadcastStatus","XUIGrayText.react","XUIText.react","RelayModern","intlSummarizeNumber","TahoeUpNextVideoUnitMetadata_video.graphql"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("RelayModern").createFragmentContainer,m=c("RelayModern").graphql;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.render=function(){__p&&__p();var o=null,p=this.props.video.owner;if(p&&(p.user_is_blue_verified||p.page_is_blue_verified))o=c("React").createElement(c("Badge.react"),{size:"xsmall",type:"verified"});else if(p&&p.page_is_gray_verified)o=c("React").createElement(c("Badge.react"),{size:"xsmall",type:"page_gray_check"});var q=null;if(this.props.video.broadcast_status==c("VideoBroadcastStatus").LIVE&&this.props.video.live_viewer_count_read_only)q=c("React").createElement("div",{className:"_2pic"},c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},i._("{live_ viewers} watching now",[i.param("live_ viewers",c("intlSummarizeNumber")(this.props.video.live_viewer_count_read_only))])));else if(this.props.video.play_count)q=c("React").createElement("div",{className:"_2pic"},c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},i._({"*":"{views} views","_1":"{views} view"},[i.param("views",c("intlSummarizeNumber")(this.props.video.play_count)),i.plural(this.props.video.play_count)])));return c("React").createElement(c("Link.react"),{className:"_u2s",href:this.props.video.permalink_url},c("React").createElement("div",{className:"_u2x"},c("React").createElement(c("LineClamp.react"),{disableNative:true,fitHeightToShorterText:true,lines:3,lineHeight:18},c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},this.props.title)),c("React").createElement(c("InlineBlock.react"),{alignv:"middle",className:"_fh9",height:16},c("React").createElement("div",{className:"_6234"},p?c("React").createElement(c("XUIText.react"),null,p.name):null,o)),q))};function n(){j.apply(this,arguments)}f.exports=l(n,{video:function o(){return c("TahoeUpNextVideoUnitMetadata_video.graphql")}})}),null);
__d("TahoeUpNextVideoUnitThumbnail.react",["cx","fbt","CssBackgroundImage.react","DurationFormatter","Link.react","React","VideoBroadcastStatus","VideoDuration.react","RelayModern","idx","TahoeUpNextVideoUnitThumbnail_video.graphql"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("RelayModern").createFragmentContainer,m=c("RelayModern").graphql;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.render=function(){var o,p,q,r=(o=this.props)!=null?(o=o.video)!=null?(o=o.preferred_thumbnail)!=null?(o=o.small_image)!=null?o.uri:o:o:o:o;if(!r)return null;return c("React").createElement(c("Link.react"),{className:this.props.className,href:this.props.video.permalink_url},c("React").createElement("div",{className:"_2pq7 _1lgn"},c("React").createElement(c("CssBackgroundImage.react"),{className:"_1lgo",imageURI:r}),c("React").createElement(c("VideoDuration.react"),{isLive:(p=this.props)!=null?(p=p.video)!=null?p.is_live_streaming:p:p,duration:(q=this.props)!=null?(q=q.video)!=null?q.playable_duration:q:q})))};function n(){j.apply(this,arguments)}f.exports=l(n,{video:function o(){return c("TahoeUpNextVideoUnitThumbnail_video.graphql")}})}),null);
__d("TahoeUpNextVideoUnit.react",["cx","fbt","Layout.react","React","Tahoe","TahoeUpNextVideoUnitThumbnail.react","TahoeUpNextVideoUnitMetadata.react","VideoBroadcastStatus","RelayModern","idx","TahoeUpNextVideoUnit_story.graphql"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("RelayModern").createFragmentContainer,m=c("RelayModern").graphql,n=c("Layout.react").Column,o=c("Layout.react").FillColumn;j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;p.prototype.render=function(){__p&&__p();var q,r=this.props.story,s=(q=r)!=null?(q=q.attachments)!=null?(q=q[0])!=null?q.media:q:q:q;if(!s)return null;if(s.broadcast_status===c("VideoBroadcastStatus").SCHEDULED_LIVE)return null;var t=s.title?s.title.text:null;if(!t)if(s.message&&s.message.text)t=s.message.text;else if(s.owner&&s.owner.name)t=i._("Video from {video_owner}",[i.param("video_owner",s.owner.name)]);return c("React").createElement("div",{className:"_bne","data-aspect-ratio":s.width&&s.height?s.width/s.height:16/9,"data-ft":r.tracking,"data-full-title":t,"data-media-id":s.id,"data-profile-id":s.owner?s.owner.id:null,"data-up-next-image":s.preferred_thumbnail&&s.preferred_thumbnail.image?s.preferred_thumbnail.image.uri:null,"data-view-count":s.play_count,id:s.id?"video-up-next-"+s.id:"video-up-next-0",ref:function(u){if(u&&this.props.preload){var v=c("Tahoe").get();v&&v.getView().setUpNextChainingInfoFromReactElement(u)}}.bind(this),title:t},c("React").createElement(c("Layout.react"),null,c("React").createElement(n,{className:"_bnf"},c("React").createElement(c("TahoeUpNextVideoUnitThumbnail.react"),{video:s})),c("React").createElement(o,null,c("React").createElement(c("TahoeUpNextVideoUnitMetadata.react"),{title:t,video:s}))))};function p(){j.apply(this,arguments)}f.exports=l(p,{story:function q(){return c("TahoeUpNextVideoUnit_story.graphql")}})}),null);
__d("TahoeUpNextViewportTracking",["csx","StreamViewportTracking","ViewportTracking"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k="tahoe_up_next_videos";i=babelHelpers.inherits(l,c("StreamViewportTracking"));j=i&&i.prototype;l.prototype.getTimetrackingDataToLog=function(m){var n=j.getTimetrackingDataToLog.call(this,m);n.ft.tracking_source=k;return n};function l(){i.apply(this,arguments)}f.exports={setup:function m(n,o,p){var q=new l(c("StreamViewportTracking").getBehavior(n,o,"._bne",p));q.init(n);return q}}}),null);
__d("TahoeUpNextTab.react",["cx","React","ReactDOM","Tahoe","TahoeUpNextVideoUnit.react","TahoeUpNextViewportTracking","RelayModern","idx","TahoeUpNextTab_query.graphql"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("RelayModern").createRefetchContainer,l=c("RelayModern").graphql,m=97,n=4;i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.state={parentVideoID:this.props.initialParentVideoID},q}o.prototype.componentDidMount=function(){var p=c("ReactDOM").findDOMNode(this.$TahoeUpNextTab1),q=this.props.viewportTrackingConfig;if(p instanceof HTMLElement&&q){c("TahoeUpNextViewportTracking").setup(q,p,m);c("TahoeUpNextViewportTracking").setup(q,p,n)}};o.prototype.render=function(){__p&&__p();var p;if(this.props.initialParentVideoID!==this.state.parentVideoID){this.props.relay.refetch({id:this.props.initialParentVideoID},null);this.setState({parentVideoID:this.props.initialParentVideoID})}var q=(p=this.props)!=null?(p=p.query)!=null?(p=p.video)!=null?(p=p.video_channel)!=null?(p=p.video_channel_feed)!=null?p.edges:p:p:p:p:p;if(!q||q.length===0)return null;return c("React").createElement("div",{className:"_3dj7 _1rgv",ref:function(r){this.$TahoeUpNextTab1=r;var s=c("Tahoe").get();s&&r&&s.getView().setUpNextVideoIDs(Array.from(r.children))}.bind(this)},q.map(function(r,s){var t,u=(t=r)!=null?(t=t.node)!=null?(t=t.attachments)!=null?(t=t[0])!=null?(t=t.media)!=null?t.id:t:t:t:t:t;if(!u||!r.node)return null;return c("React").createElement(c("TahoeUpNextVideoUnit.react"),{key:"up-next-video-unit-"+u,preload:s===0,story:r.node})}))};f.exports=k(o,{query:function p(){return c("TahoeUpNextTab_query.graphql")}})}),null);
__d("TahoeUpNextTabRoot.react",["cx","PixelRatio","VideoChannelEntryPoint","TahoeUpNextUnitPlaceholder.react","TahoeUpNextTab.react","React","RelayFBEnvironment","RelayModern","TahoeUpNextTabRootQuery.graphql"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l=c("RelayModern").graphql,m=c("RelayModern").QueryRenderer;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={parentVideoID:this.props.initialParentVideoID},p}n.prototype.render=function(){return c("React").createElement(m,{environment:c("RelayFBEnvironment"),query:i||(i=function i(){return c("TahoeUpNextTabRootQuery.graphql")}),render:function(o){var p=o.error,q=o.props;if(p)return null;if(!q)return c("React").createElement("div",{className:"_4f4w _3oex"},c("React").createElement("div",{className:"_wxj _1-z7"},c("React").createElement(c("TahoeUpNextUnitPlaceholder.react"),null)));return c("React").createElement(c("TahoeUpNextTab.react"),{initialParentVideoID:this.state.parentVideoID,query:q,viewportTrackingConfig:this.props.viewportTrackingConfig})}.bind(this),variables:{entryPoint:c("VideoChannelEntryPoint").TAHOE,scale:c("PixelRatio").get(),parentVideoID:this.state.parentVideoID}})};f.exports=n}),null);
__d("TahoeEndScreenUpNextTile.react",["cx","fbt","DOM","DOMContainer.react","Image.react","ImageBlock.react","ProfileLink.react","ProfileTile.react","React","ResizeListener","ShimButton.react","TahoeEllipsisText.react","TahoeEndScreenProgressCircle.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=20;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={containerWidth:0,containerHeight:0,countdownTimeoutSec:this.props.countdownTimeoutSec,cancelButtonVisible:true},this.$TahoeEndScreenUpNextTile2=function(){if(this.container)this.setState({containerWidth:this.container.clientWidth,containerHeight:this.container.clientHeight})}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.$TahoeEndScreenUpNextTile2();this.$TahoeEndScreenUpNextTile1=c("ResizeListener").add(this.$TahoeEndScreenUpNextTile2)};m.prototype.componentWillUnmount=function(){"use strict";this.$TahoeEndScreenUpNextTile1&&this.$TahoeEndScreenUpNextTile1.remove()};m.prototype.$TahoeEndScreenUpNextTile3=function(){"use strict";this.setState({cancelButtonVisible:false,countdownTimeoutSec:0});if(this.props.onCancelClicked)this.props.onCancelClicked()};m.prototype.render=function(){"use strict";__p&&__p();var n=c("DOM").create("span",undefined,this.props.titleText),o=0,p=0,q=Math.min(this.state.containerWidth,this.state.containerHeight);if(this.props.aspectRatio>=1){o=q;p=q/this.props.aspectRatio}else{p=q;o=q*this.props.aspectRatio}var r={backgroundImage:this.props.imageUrl?"url("+this.props.imageUrl+")":"none",width:o+"px",height:p+"px"},s=i._("UP NEXT"),t=i._("Cancel");return c("React").createElement("div",{className:"_6236",ref:function(u){return this.container=u}.bind(this)},c("React").createElement("div",{className:"_6237",style:r},c("React").createElement("div",{className:"_6238"},s),c("React").createElement(c("ShimButton.react"),{hidden:!this.state.cancelButtonVisible,className:"_6239",onClick:function(){return this.$TahoeEndScreenUpNextTile3()}.bind(this)},t),c("React").createElement("div",{className:"_6230"},c("React").createElement("div",{className:"_29y5"},c("React").createElement(c("TahoeEllipsisText.react"),{content:n,lines:1,lineHeight:l})),c("React").createElement("div",{className:"_6231"},c("React").createElement("span",null,c("React").createElement(c("ImageBlock.react"),{className:"_62sw"},c("React").createElement(c("ProfileTile.react"),{id:String(this.props.profileID),size:16}),c("React").createElement(c("ProfileLink.react"),{uid:String(this.props.profileID)},c("React").createElement(c("DOMContainer.react"),null,this.props.profileCard))),"\u2014",c("React").createElement("span",{className:"_6232"},this.props.viewCount)))),c("React").createElement("div",{className:"_2x_j"},c("React").createElement(c("TahoeEndScreenProgressCircle.react"),{makeProgress:true,onProgressDone:this.props.onCountdownDone,timeoutSec:this.state.countdownTimeoutSec},c("React").createElement(c("Image.react"),{onClick:this.props.onPlayClick,className:"_6235",src:"/images/video/player/embedded_controls/icons/play-2x.png"})))))};m.defaultProps={countdownTimeoutSec:3,aspectRatio:1};f.exports=m}),null);
__d("TahoeVideoEndScreen",["cx","invariant","CSS","DOM","React","ReactDOM","TahoeEndScreenUpNextTile.react","TahoeVideoFloatingReplayImage.react","VideoChannelProgressCircle.react","VideoChannelReplayImage.react","VideoPlayerExperiments","TahoeTypedLogger","TahoeLoggerEvent"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("VideoPlayerExperiments").endScreenDuration/1e3;function k(l){"use strict";this.$TahoeVideoEndScreen1=l||function(){};this.$TahoeVideoEndScreen3=function(){};this.$TahoeVideoEndScreen2=c("DOM").create("div",{className:"_1r-0 _2se8"})}k.prototype.showEndScreen=function(l,m,n,o,p){"use strict";__p&&__p();l||i(0);var q=o?o.videoID:null;this.$TahoeVideoEndScreen3=function(r){new(c("TahoeTypedLogger"))().setEvent(r).setMediaID(n.videoID).setChainDepth(n.chainDepth).setChainingContextIdentifier(n.chainingContextIdentifier).setIsAutoplaying(m).setUpNextMediaID(q).log()};this.$TahoeVideoEndScreen3(c("TahoeLoggerEvent").END_SCREEN_SHOWN);c("CSS").addClass(l,"_1r-1");c("CSS").addClass(l,"_1s-2");l.appendChild(this.$TahoeVideoEndScreen2);if(m)this.$TahoeVideoEndScreen4(o||{},p);else this.$TahoeVideoEndScreen5()};k.prototype.$TahoeVideoEndScreen5=function(){"use strict";c("ReactDOM").render(c("React").createElement("div",{className:"_1szy"},c("React").createElement(c("VideoChannelProgressCircle.react"),{makeProgress:false,timeoutSec:j},c("React").createElement(c("VideoChannelReplayImage.react"),{onClick:function(){this.$TahoeVideoEndScreen3(c("TahoeLoggerEvent").END_SCREEN_REPLAY);this.$TahoeVideoEndScreen1()}.bind(this)}))),this.$TahoeVideoEndScreen2)};k.prototype.$TahoeVideoEndScreen4=function(l,m){"use strict";c("ReactDOM").render(c("React").createElement("div",null,c("React").createElement(c("TahoeEndScreenUpNextTile.react"),{countdownTimeoutSec:j,onCountdownDone:function(){this.$TahoeVideoEndScreen3(c("TahoeLoggerEvent").END_SCREEN_COUNTDOWN_FINISH);m(false)}.bind(this),onPlayClick:function(){this.$TahoeVideoEndScreen3(c("TahoeLoggerEvent").END_SCREEN_PLAY);m(true)}.bind(this),onCancelClicked:function(){this.$TahoeVideoEndScreen3(c("TahoeLoggerEvent").END_SCREEN_CANCEL)}.bind(this),titleText:l.title,viewCount:l.viewCount,imageUrl:l.imgUrl,profileCard:l.profileCard,aspectRatio:l.aspectRatio,profileID:l.profileID}),c("React").createElement(c("TahoeVideoFloatingReplayImage.react"),{onClick:function(){this.$TahoeVideoEndScreen3(c("TahoeLoggerEvent").END_SCREEN_REPLAY);this.$TahoeVideoEndScreen1()}.bind(this)})),this.$TahoeVideoEndScreen2)};k.prototype.endCountdown=function(l){"use strict";l||i(0);c("CSS").removeClass(l,"_1s-2");c("CSS").removeClass(l,"_1r-1");c("ReactDOM").unmountComponentAtNode(this.$TahoeVideoEndScreen2)};f.exports=k}),null);
__d("XTahoeUpNextAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/tahoe/upnext/async/{media_id}/",{channel_id:{type:"String"},media_id:{type:"FBID",required:true},viewed_videos:{type:"FBIDSet"},caller:{type:"Enum",enumType:1},chainingindex:{type:"Int"},cursor:{type:"String"},search_keywords:{type:"String"}})}),null);
__d("TahoeVideoView",["csx","cx","Arbiter","AsyncRequest","CommercialBreakUtil","CSS","DOM","DOMQuery","Event","EventProfiler","HTML","Keys","React","ReactDOM","ReactRenderer","Set","Style","SubscriptionsHandler","TabBar","Tahoe","TahoeLoggerEvent","TahoeSidePanePlaceholder.react","TahoeUpNextOverlayAndEndScreen.react","TahoeUpNextTabRoot.react","TahoeUpNextViewportTracking","TahoeVariables","TahoeVideoEndScreen","TahoeView","TimeSlice","URI","Vector","VideoPermalinkURI","VideoPlaybackProgressTracker","VideoPlayerReason","VideoPlayerStates","VideoTipJarTypedLogger","XTahoeAsyncController","XTahoeUpNextAsyncController","XBasicFBNuxGenShouldShowController","XUIAmbientNUX.react","TahoeFollowButtonNUX.react","ge","idx","uuid"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=9,m="tahoe-preloaded-video",n="video-up-next-",o=7,p=97,q=4,r=5479,s=75;j=babelHelpers.inherits(t,c("TahoeView"));k=j&&j.prototype;function t(u,v,w){"use strict";__p&&__p();k.constructor.call(this,u,v,w);this.$TahoeVideoView31=function(){c("CSS").hide(this.$TahoeVideoView12);this.$TahoeVideoView7.setFullWidth(true)}.bind(this);this.$TahoeVideoView32=function(){c("CSS").show(this.$TahoeVideoView12);this.$TahoeVideoView7.setFullWidth(false)}.bind(this);this.$TahoeVideoView7=u;this.$TahoeVideoView9=this.$TahoeVideoView7.getID();this.$TahoeVideoView17=v;this.$TahoeVideoView18=w;this.$TahoeVideoView16=new(c("Set"))([this.$TahoeVideoView9]);this.$TahoeVideoView5=c("uuid")();this.$TahoeVideoView15=false;this.$TahoeVideoView23=[];this.$TahoeVideoView24=null;this.$TahoeVideoView25=false;this.$TahoeVideoView27=false;this.$TahoeVideoView7.addEvent(c("Event").listen(document,"keydown",this.$TahoeVideoView28.bind(this)));this.$TahoeVideoView14=c("CSS").setClass(c("DOM").create("div"),"_1e8c _2b-0");this.$TahoeVideoView12=c("CSS").setClass(c("DOM").create("div"),"_5-lm _3aw0");this.$TahoeVideoView6=c("CSS").setClass(c("DOM").create("div"),"_17am");this.$TahoeVideoView10=c("CSS").setClass(c("DOM").create("div"),"hidden_elem");c("ReactDOM").render(c("React").createElement(c("TahoeSidePanePlaceholder.react"),null),this.$TahoeVideoView12);c("DOM").appendContent(this.$TahoeVideoView7.getContent(),this.$TahoeVideoView14);c("DOM").appendContent(this.$TahoeVideoView7.getSideContent(),this.$TahoeVideoView12);c("DOM").appendContent(this.$TahoeVideoView12,this.$TahoeVideoView6);c("DOM").appendContent(this.$TahoeVideoView7.getContent(),this.$TahoeVideoView10);var x=this.$TahoeVideoView7.getChannelID(),y=this.$TahoeVideoView7.getCaller();if(this.$TahoeVideoView7.getMediaController()){this.$TahoeVideoView29(this.$TahoeVideoView7.getID(),false,x,y);this.setUpEndScreen();this.setUpUFI()}else this.updateView(this.$TahoeVideoView7.getID(),x,y);this.$TahoeVideoView1=new(c("SubscriptionsHandler"))();this.$TahoeVideoView1.addSubscriptions(c("Arbiter").subscribe("layer_shown",this.$TahoeVideoView30.bind(this)),c("Arbiter").subscribe("UFIAddComment/focus",this.selectCommentTab.bind(this)),c("Arbiter").subscribe("quiet-mode-on",this.$TahoeVideoView31),c("Arbiter").subscribe("quiet-mode-off",this.$TahoeVideoView32))}t.prototype.$TahoeVideoView30=function(u,v){"use strict";if(v.type==="DialogX"||v.type==="PhotoSnowlift"){var w=this.$TahoeVideoView7.getMediaController(),x=w,y=this.$TahoeVideoView8;if(x.isState(c("VideoPlayerStates").FINISHED)&&y){var z=w.getRootNode();y.endCountdown(z);y.showEndScreen(z,false,{videoID:w.getMediaID(),chainDepth:Array.from(this.$TahoeVideoView16).length,chainingContextIdentifier:this.$TahoeVideoView5},{},function(){})}}};t.prototype.setUpUFI=function(){"use strict";__p&&__p();var u=this.$TahoeVideoView7.getMediaController();if(u){this.$TahoeVideoView7.addEvent(u.addListener("commercialBreak/hideUFI",function(){return this.$TahoeVideoView33(true)}.bind(this)));this.$TahoeVideoView7.addEvent(u.addListener("commercialBreak/showUFI",function(){return this.$TahoeVideoView33(false)}.bind(this)));if(this.$TahoeVideoView27)this.$TahoeVideoView34()}};t.prototype.$TahoeVideoView34=function(){__p&&__p();var u;"use strict";var v=c("DOM").create("div"),w=c("DOMQuery").scry(this.$TahoeVideoView12,"._4epf"),x=(u=w)!=null?(u=u[0])!=null?u.firstChild:u:u,y=this.$TahoeVideoView7.getMediaController(),z=y;if(x)c("VideoPlaybackProgressTracker").onPercentageWatched(z,s,function(){var A=c("XBasicFBNuxGenShouldShowController").getURIBuilder().setInt("nux_id",r).getURI();new(c("AsyncRequest"))().setURI(A).setMethod("GET").setReadOnly(true).setHandler(function(B){var C=B.getPayload();if(C.should_show_nux&&!this.$TahoeVideoView25){c("ReactDOM").render(c("React").createElement(c("TahoeFollowButtonNUX.react"),{ref:function(D){this.$TahoeVideoView26=D}.bind(this),context:x}),v);c("DOM").appendContent(this.$TahoeVideoView12,v)}}.bind(this)).send()}.bind(this))};t.prototype.$TahoeVideoView33=function(u){"use strict";c("CSS").conditionClass(this.$TahoeVideoView6,"_17an",u);c("CSS").conditionClass(this.$TahoeVideoView14,"_3qt9",u);if(u)this.$TahoeVideoView35();else c("CommercialBreakUtil").removeContextCard(this.$TahoeVideoView19)};t.prototype.$TahoeVideoView35=function(){"use strict";var u=c("DOM").scry(this.$TahoeVideoView12,"._25x8");if(u.length!==0)return;this.$TahoeVideoView19=c("DOM").create("div",{className:"_25x8"});c("DOM").appendContent(this.$TahoeVideoView12,this.$TahoeVideoView19);var v=this.$TahoeVideoView7.getMediaController(),w=v;c("CommercialBreakUtil").renderContextCard(w,this.$TahoeVideoView19)};t.prototype.setUpEndScreen=function(){"use strict";__p&&__p();var u=this.$TahoeVideoView7.getMediaController(),v=u;if(u.isLiveVideo()){this.$TahoeVideoView8=null;return}if(!c("TahoeVariables").useGridViewEndScreen){this.$TahoeVideoView8=new(c("TahoeVideoEndScreen"))(function(){var w=this.$TahoeVideoView8;w&&w.endCountdown(u.getRootNode());var x=c("DOMQuery").scry(u.getRootNode(),"._35sk")[0];if(x)c("CSS").show(x);v.play(c("VideoPlayerReason").USER)}.bind(this));this.$TahoeVideoView7.addEvent(v.addListener("playRequested",function(){if(this.$TahoeVideoView8)this.$TahoeVideoView8.endCountdown(u.getRootNode())}.bind(this)))}else if(v)v.addListener("updateStatus",function(w){__p&&__p();var x=v.getPlaybackDuration()-w.position,y=v.getState();if(y!==c("VideoPlayerStates").PAUSED&&!this.$TahoeVideoView24&&x<=o){var z=c("DOM").create("div",{className:"_4n-p"});c("ReactRenderer").constructAndRenderComponent(c("TahoeUpNextOverlayAndEndScreen.react"),{videoIDs:this.$TahoeVideoView23.slice(0,l),countdownTimeoutSec:x+1,vpc:v,logEvent:function(A){this.$TahoeVideoView7.logEvent(A)}.bind(this),tahoeController:this.$TahoeVideoView7},z);v.getRootNode().appendChild(z);this.$TahoeVideoView24=z}else if(this.$TahoeVideoView24&&x>o)this.$TahoeVideoView36()}.bind(this));this.$TahoeVideoView7.addEvent(u.addListener("stateChange",this.$TahoeVideoView37.bind(this)));this.$TahoeVideoView7.addEvent(u.addListener("toggleFullscreen",this.$TahoeVideoView37.bind(this)))};t.prototype.$TahoeVideoView37=function(){"use strict";__p&&__p();var u=this.$TahoeVideoView7.getMediaController(),v=this.$TahoeVideoView8,w=u;c("CSS").conditionClass(this.$TahoeVideoView14,"_65dt",w.isState(c("VideoPlayerStates").FINISHED));if(!w.isState(c("VideoPlayerStates").FINISHED)||w.isFullscreen()||c("TahoeVariables").useGridViewEndScreen)return;if(v){v.showEndScreen(u.getRootNode(),!!this.$TahoeVideoView3,{videoID:u.getMediaID(),chainDepth:Array.from(this.$TahoeVideoView16).length,chainingContextIdentifier:this.$TahoeVideoView5},this.$TahoeVideoView2||{},function(y){this.$TahoeVideoView7.setPlayReason(y?c("VideoPlayerReason").USER:c("VideoPlayerReason").AUTOPLAY);if(this.$TahoeVideoView3)this.$TahoeVideoView7.go(this.$TahoeVideoView3);v.endCountdown(u.getRootNode())}.bind(this));var x=c("DOMQuery").scry(u.getRootNode(),"._35sk")[0];if(x)c("CSS").hide(x)}};t.prototype.$TahoeVideoView36=function(){"use strict";var u=this.$TahoeVideoView24;if(u){c("ReactDOM").unmountComponentAtNode(u);c("DOM").remove(u);this.$TahoeVideoView24=null}};t.prototype.$TahoeVideoView38=function(){"use strict";c("CSS").addClass(this.$TahoeVideoView12,"_4f4w");c("DOM").empty(this.$TahoeVideoView14)};t.prototype.$TahoeVideoView39=function(){__p&&__p();var u;"use strict";c("CSS").removeClass(this.$TahoeVideoView12,"_4f4w");var v=c("DOMQuery").scry(this.$TahoeVideoView12,"._4epf"),w=(u=v)!=null?(u=u[0])!=null?(u=u.childNodes)!=null?u[0]:u:u:u;w&&c("Event").listen(w,"click",function(){this.$TahoeVideoView25=true;this.$TahoeVideoView40()}.bind(this));if(this.$TahoeVideoView15){var x=c("DOMQuery").find(this.$TahoeVideoView12,"._3dj6");x=c("CSS").removeClass(x,"_3dj6");var y=c("DOM").find(this.$TahoeVideoView10,"._3dj7");c("DOM").setContent(x,y);c("EventProfiler").informManualInteractionTimestamp(["Tahoe"],true,"click");this.$TahoeVideoView15=false;if(y.firstChild)this.$TahoeVideoView41(y.firstChild,function(){c("TimeSlice").guard(this.$TahoeVideoView42.bind(this),"Tahoe preload next video",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()}.bind(this),function(){return this.selectCommentTab()}.bind(this))}};t.prototype.$TahoeVideoView28=function(u){"use strict";if(u.keyCode===c("Keys").ESC&&!u.cancelBubble&&!u.defaultPrevented&&!this.$TahoeVideoView7.getIsPermalink()){this.$TahoeVideoView7.logEvent(c("TahoeLoggerEvent").EXIT_WITH_ESC);this.$TahoeVideoView7.onExit()}};t.prototype.$TahoeVideoView43=function(u,v,w,x){"use strict";__p&&__p();if(!c("TahoeVariables").useReactReparenting){var y=this.$TahoeVideoView44(u,w,x);y&&y.send()}var z=c("DOMQuery").scry(this.$TahoeVideoView7.getContent(),"._1c_u"),A=c("DOMQuery").scry(this.$TahoeVideoView12,"._1rgu");if(z[0])c("DOM").replace(z[0],c("DOMQuery").scry(v,"._5-yb")[0]);c("DOM").setContent(this.$TahoeVideoView14,c("DOMQuery").find(v,"._1w6j"));if(A[0])c("DOM").replace(A[0],c("DOMQuery").find(v,"._1rgu"));else c("DOM").appendContent(this.$TahoeVideoView12,c("DOMQuery").find(v,"._1rgu"));t.registerPendingController(this.$TahoeVideoView11);!c("TahoeVariables").useReactReparenting&&this.$TahoeVideoView39();if(c("TahoeVariables").useReactReparenting){A=c("DOMQuery").scry(this.$TahoeVideoView12,"._1rgu");if(A[0]){var B=c("DOMQuery").find(A[0],"._1rh0"),C=c("DOM").create("div");c("ReactDOM").render(c("React").createElement(c("TahoeUpNextTabRoot.react"),{initialParentVideoID:u,viewportTrackingConfig:this.$TahoeVideoView20}),C);c("DOM").appendContent(B,C)}}};t.prototype.$TahoeVideoView29=function(u,v,w,x,y){"use strict";__p&&__p();this.$TahoeVideoView3=null;this.$TahoeVideoView2=null;var z=null;if(!v)z=[JSON.stringify(this.$TahoeVideoView7.getFeedTracking())];else z=this.$TahoeVideoView45(u);var A=c("XTahoeAsyncController").getURIBuilder().setFBID("id",u).setBool("chain",v).setBool("isvideo",true).setString("originalmediaid",this.$TahoeVideoView9).setEnum("playerorigin",this.$TahoeVideoView17).setString("playersuborigin",this.$TahoeVideoView18).setString("sponsoreddata",y).setString("externallogid",this.$TahoeVideoView7.getExternalLogID()).setEnum("reactionvideochanneltype",this.$TahoeVideoView7.getReactionVideoChannelType()).setString("reactionvideochannelsubtype",this.$TahoeVideoView7.getReactionVideoChannelSubtype()).setBool("ispermalink",this.$TahoeVideoView7.getIsPermalink()).setStringVector("feedtracking",z),B=this.$TahoeVideoView7.getStoryIdentifier();B&&A.setString("storyidentifier",B);var C=new(c("AsyncRequest"))(A.getURI()).setHandler(function(E){__p&&__p();var F=E.getPayload();if(v){var G=c("DOMQuery").scry(this.$TahoeVideoView7.getContent(),"._1c_u"),H=c("DOMQuery").scry(this.$TahoeVideoView12,"._1rgu");if(G[0])c("DOM").replace(G[0],c("HTML").replaceJSONWrapper(F.video.markup));c("DOM").setContent(this.$TahoeVideoView14,c("HTML").replaceJSONWrapper(F.ufiTray.markup));if(H[0])c("DOM").replace(H[0],c("HTML").replaceJSONWrapper(F.sidePane.markup));else c("DOM").appendContent(this.$TahoeVideoView12,c("HTML").replaceJSONWrapper(F.sidePane.markup));var I=typeof F.autoplayAllowed==="boolean"?F.autoplayAllowed:true;this.$TahoeVideoView7.setAutoplayAllowed(I)}else{c("DOM").appendContent(this.$TahoeVideoView14,c("HTML").replaceJSONWrapper(F.ufiTray.markup));c("DOM").appendContent(this.$TahoeVideoView12,c("HTML").replaceJSONWrapper(F.sidePane.markup))}this.$TahoeVideoView27=!!F.isShowVideo;this.$TahoeVideoView39();c("EventProfiler").informManualInteractionTimestamp(["Tahoe"],true,"click")}.bind(this)),D=null;if(!c("TahoeVariables").useReactReparenting)D=this.$TahoeVideoView44(u,w,x);C.send();D&&D.send();this.$TahoeVideoView38()};t.prototype.$TahoeVideoView41=function(u,v,w){"use strict";var x=c("DOMQuery").scry(u,"a")[0],y=c("DOMQuery").scry(u,"._fh9")[0];if(x){this.$TahoeVideoView3=x.getAttribute("href");this.$TahoeVideoView2={videoID:u.getAttribute("data-media-id")||"",title:u.getAttribute("data-full-title")||"",imgUrl:u.getAttribute("data-up-next-image")||"",viewCount:u.getAttribute("data-view-count")||"",aspectRatio:parseFloat(u.getAttribute("data-aspect-ratio")),profileCard:y?y.cloneNode(true):undefined,profileID:u.getAttribute("data-profile-id")||""};v&&v()}else w&&w()};t.prototype.setUpNextChainingInfoFromReactElement=function(u){"use strict";this.$TahoeVideoView41(u,function(){c("TimeSlice").guard(this.$TahoeVideoView42.bind(this),"Tahoe preload next video",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()}.bind(this),function(){return this.selectCommentTab()}.bind(this))};t.prototype.$TahoeVideoView44=function(u,v,w){"use strict";__p&&__p();var x=c("ge")(n+u);if(x){var y=x.parentNode,z=Array.from(y.children);z.some(function(C){if(C.id!==n+u){c("DOM").remove(C);return false}else return true});c("DOM").remove(y.firstChild);c("DOM").appendContent(this.$TahoeVideoView10,y);if(y.children.length>=10){this.$TahoeVideoView23=this.$TahoeVideoView46(Array.from(y.children));this.$TahoeVideoView15=true;return null}}else if(!x&&u!==this.$TahoeVideoView9){this.$TahoeVideoView7.resetChannelData();this.$TahoeVideoView4=null;v=null;w=null}var A=c("XTahoeUpNextAsyncController").getURIBuilder().setFBID("media_id",u).setFBIDSet("viewed_videos",Array.from(this.$TahoeVideoView16)).setString("channel_id",v).setEnum("caller",w).setString("cursor",this.$TahoeVideoView4).setString("search_keywords",this.$TahoeVideoView7.getSearchKeywordsForVideoChaining()),B=new(c("AsyncRequest"))(A.getURI()).setHandler(function(C){__p&&__p();var D,E=this,F=C.getPayload();this.$TahoeVideoView4=F.chainingCursor;if(F.viewportTrackingConfig)this.$TahoeVideoView20=F.viewportTrackingConfig;var G=c("HTML").replaceJSONWrapper(F.upNextUnit.markup);this.$TahoeVideoView15=true;var H=c("DOMQuery").scry(this.$TahoeVideoView12,"._3dj6"),I=c("DOMQuery").scry(this.$TahoeVideoView10,"._3dj7");if(I[0])(function(){__p&&__p();c("DOM").appendContent(E.$TahoeVideoView10,G);I=c("DOMQuery").scry(E.$TahoeVideoView10,"._3dj7");var L=Array.from(I[1].children);L.forEach(function(N){c("DOM").appendContent(I[0],N)});c("DOM").remove(I[1]);G=I[0];var M={};Array.from(G.children).forEach(function(N){if(M[N.id])c("DOM").remove(N);else M[N.id]=true});c("DOM").remove(I[0])})();var J=null;if(H[0]){H=c("CSS").removeClass(H[0],"_3dj6");c("DOM").setContent(H,G);this.$TahoeVideoView15=false;J=H}else{c("DOM").appendContent(this.$TahoeVideoView10,G);J=this.$TahoeVideoView10}I=c("DOMQuery").scry(J,"._3dj7");if(I[0])this.$TahoeVideoView23=this.$TahoeVideoView46(Array.from(I[0].children));if(this.$TahoeVideoView20){var K=this.$TahoeVideoView20;this.$TahoeVideoView21=c("TahoeUpNextViewportTracking").setup(K,J,p);this.$TahoeVideoView22=c("TahoeUpNextViewportTracking").setup(K,J,q)}var z=c("DOMQuery").scry(this.$TahoeVideoView12,"._bne");c("EventProfiler").informManualInteractionTimestamp(["Tahoe"],true,"click");if(z[0])this.$TahoeVideoView41(z[0],function(){c("TimeSlice").guard(this.$TahoeVideoView42.bind(this),"Tahoe preload next video",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()}.bind(this),function(){return this.selectCommentTab()}.bind(this))}.bind(this));return B};t.prototype.$TahoeVideoView46=function(u){"use strict";return u.map(function(v){return v.id.substring(n.length)})};t.prototype.setUpNextVideoIDs=function(u){"use strict";this.$TahoeVideoView23=this.$TahoeVideoView46(u)};t.prototype.getUpNextVideoIDs=function(){"use strict";return this.$TahoeVideoView23};t.prototype.$TahoeVideoView42=function(){"use strict";__p&&__p();var u=new(c("URI"))(this.$TahoeVideoView3),v=c("VideoPermalinkURI").parse(u).video_id;if(!v)return;var w=u.getQueryData().sp,x=this.$TahoeVideoView45(v),y=c("XTahoeAsyncController").getURIBuilder().setFBID("id",v).setBool("chain",true).setBool("isvideo",true).setString("originalmediaid",this.$TahoeVideoView9).setBool("preload",true).setEnum("playerorigin",this.$TahoeVideoView17).setString("playersuborigin",this.$TahoeVideoView18).setString("sponsoreddata",w).setEnum("reactionvideochanneltype",this.$TahoeVideoView7.getReactionVideoChannelType()).setString("reactionvideochannelsubtype",this.$TahoeVideoView7.getReactionVideoChannelSubtype()).setString("externallogid",this.$TahoeVideoView7.getExternalLogID()).setStringVector("feedtracking",x),z=new(c("AsyncRequest"))(y.getURI()).setHandler(function(A){var B=A.getPayload(),C=c("DOM").create("div",{id:"preload-"+v,"class":m});c("DOM").appendContent(C,c("HTML").replaceJSONWrapper(B.video.markup));c("DOM").appendContent(C,c("HTML").replaceJSONWrapper(B.ufiTray.markup));c("DOM").appendContent(C,c("HTML").replaceJSONWrapper(B.sidePane.markup));c("DOM").appendContent(this.$TahoeVideoView10,C);var D=typeof B.autoplayAllowed==="boolean"?B.autoplayAllowed:true;this.$TahoeVideoView7.setAutoplayAllowed(D)}.bind(this));z.send()};t.prototype.$TahoeVideoView45=function(u){"use strict";var v=null,w=c("ge")(n+u);if(w&&w.getAttribute("data-ft"))v=['{"ft":'+w.getAttribute("data-ft")+"}"];return v};t.prototype.selectAddComment=function(){"use strict";var u=c("DOMQuery").scry(this.$TahoeVideoView12,".UFIAddCommentInput");u[0]&&u[0].click();this.selectCommentTab()};t.prototype.selectCommentTab=function(){"use strict";var u=c("DOMQuery").scry(this.$TahoeVideoView12,"._1rgu")[0];if(u){c("CSS").addClass(u,"_601h");c("CSS").removeClass(u,"_601i")}};t.prototype.selectUpNextTab=function(){"use strict";var u=c("DOMQuery").scry(this.$TahoeVideoView12,"._1rgu")[0];if(u){c("CSS").addClass(u,"_601i");c("CSS").removeClass(u,"_601h")}};t.prototype.updateView=function(u,v,w){__p&&__p();var x=arguments.length<=3||arguments[3]===undefined?null:arguments[3];"use strict";this.$TahoeVideoView16.add(u);var y=c("DOMQuery").scry(this.$TahoeVideoView10,"#preload-"+u);if(y[0]&&this.$TahoeVideoView11){this.$TahoeVideoView43(u,y[0],v,w);this.$TahoeVideoView47()}else{this.$TahoeVideoView47();this.$TahoeVideoView21&&this.$TahoeVideoView21.cleanup();this.$TahoeVideoView22&&this.$TahoeVideoView22.cleanup();this.$TahoeVideoView29(u,true,v,w,x)}this.$TahoeVideoView40()};t.prototype.$TahoeVideoView47=function(){"use strict";this.$TahoeVideoView11=null;var u=c("DOMQuery").scry(this.$TahoeVideoView10,"."+m);Array.from(u).forEach(function(v){c("DOM").remove(v)})};t.prototype.$TahoeVideoView40=function(){"use strict";if(this.$TahoeVideoView26)this.$TahoeVideoView26.hide()};t.prototype.toggleSupportOverlay=function(){"use strict";__p&&__p();var u=c("DOMQuery").scry(this.$TahoeVideoView12,"._1326");if(u.length===0)return;var v=u[0];if(!v)return;if(c("CSS").shown(v)){c("CSS").hide(v);new(c("VideoTipJarTypedLogger"))().setEvent("tipjar_dismissed").setVideoID(this.$TahoeVideoView7.getMediaController().getMediaID()).log()}else c("CSS").show(v)};t.prototype.onExit=function(){"use strict";this.$TahoeVideoView8&&this.$TahoeVideoView8.endCountdown(this.$TahoeVideoView7.getMediaController().getRootNode());this.$TahoeVideoView1.release();this.$TahoeVideoView36()};t.registerCommentLink=function(u){"use strict";j.registerCommentLink.call(this,u)};t.registerPendingController=function(u){"use strict";var v=c("Tahoe").get();if(v&&u)v.updateMedia(u)};t.registerPreloadController=function(u){"use strict";var v=c("Tahoe").get();if(v)v.getView().$TahoeVideoView11=u};t.registerSidepaneTabbar=function(u){__p&&__p();var v;"use strict";var w=c("Tahoe").get();if(w!=null)(function(){var x=w.getView();if(x instanceof t)u.subscribe(c("TabBar").TAB_CLICK,function(y,z){switch(z){case"up-next":x.selectUpNextTab();break;case"comments":x.selectCommentTab()}})})()};t.registerSupportLink=function(u){"use strict";__p&&__p();var v=c("Tahoe").get();if(v==null)return;var w=v.getView();if(!(w instanceof t))return;v.addEvent(c("Event").listen(u,"click",function(){w.toggleSupportOverlay();new(c("VideoTipJarTypedLogger"))().setEvent("support_button_clicked").setVideoID(v.getMediaController().getMediaID()).log()}))};t.registerFanSupportWindow=function(u,v,w,x){"use strict";__p&&__p();var y=c("Tahoe").get();if(y==null)return;var z=c("DOMQuery").scry(u,"._1sj-");if(z.length>0)y.addEvent(c("Event").listen(z[0],"click",function(){c("CSS").show(v);c("CSS").hide(u);new(c("VideoTipJarTypedLogger"))().setEvent("policy_dismissed").setVideoID(y.getMediaController().getMediaID()).log()}));var A=y.getView();if(!(A instanceof t))return;window.addEventListener("click",function(B){__p&&__p();var C=c("DOMQuery").scry(A.$TahoeVideoView12,"._1326");if(C.length===0||!c("CSS").shown(C[0]))return;var w=c("DOMQuery").scry(A.$TahoeVideoView12,"._1328");if(w.length===0||B.path.indexOf(w[0])>=0)return;var D=c("DOMQuery").scry(A.$TahoeVideoView14,"._4wjk");if(D.length!==0&&B.path.indexOf(D[0])>=0)return;var E=c("DOMQuery").scry(A.$TahoeVideoView12,"._1sj_");if(E.length!==0&&B.path.indexOf(E[0])>=0)return;c("CSS").hide(C[0]);new(c("VideoTipJarTypedLogger"))().setEvent("tipjar_dismissed").setVideoID(y.getMediaController().getMediaID()).log()})};t.loadView=function(u,v,w){"use strict";return new t(u,v,w)};f.exports=t}),null);
__d("TahoeController",["cx","csx","Arbiter","BootloadedComponent.react","CSS","CurrentUser","DialogX","DOM","DOMQuery","EventProfiler","FantaTabActions","JSResource","LiveVideoExperiments","PageTransitions","PhotoPermalinkURI","React","ReactDOM","ResizeListener","Style","Tahoe","TahoeActions","TahoeDispatcher","TahoeLoggerEvent","TahoeMediaType","TahoeTypedLogger","TahoeVariables","TahoeVideoView","TahoePhotoView","TahoePhotoSurfaces","TimeSlice","URI","VideoAutoplayControllerX","VideoChannelCallerToPlayerOriginMap","VideoPermalinkURI","VideoPlayerLoggerSource","VideoPlayerOrigins","VideoPlayerReason","XUISpinner.react","collectDataAttributes","getElementPosition","getVendorPrefixedName","requireWeak","shouldWNSRenderToRHC","TahoeVideoStore"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c("requireWeak")("VideoProgressPreviewBar.react",function(t){j=t});var k;c("requireWeak")("VideoWatchAndScrollController",function(t){k=t});var l=400,m=c("CurrentUser").isLoggedIn()?43:0,n=48,o=876,p=o-l,q=560-m-n,r=4;function s(t){__p&&__p();this.$TahoeController1=false;this.$TahoeController3=true;this.$TahoeController22=false;this.$TahoeController23=false;this.$TahoeController30=c("VideoPlayerReason").USER;this.$TahoeController41=false;this.$TahoeController54=function(){this.$TahoeController51()}.bind(this);c("TahoeDispatcher").explicitlyRegisterStores([c("TahoeVideoStore")]);c("EventProfiler").tagCurrentActiveInteractionsAs("Tahoe");this.$TahoeController27=t.mediaType;this.$TahoeController12=[];this.$TahoeController22=t.isPermalink;this.$TahoeController40=t.storyIdentifier;if(this.$TahoeController27===c("TahoeMediaType").VIDEO){this.$TahoeController37=t.origin;this.$TahoeController38=t.suborigin;this.$TahoeController5=t.channelID;this.$TahoeController4=t.caller;this.$TahoeController31=t.reactionVideoChannelType;this.$TahoeController32=t.reactionVideoChannelSubtype}else if(this.$TahoeController27===c("TahoeMediaType").PHOTO)this.$TahoeController29=t.photoSurface;this.$TahoeController34=t.searchKeywordsForVideoChaining;this.$TahoeController11=t.externalLogID;this.$TahoeController10=c("URI").getRequestURI();this.$TahoeController28=this.$TahoeController43.bind(this);this.$TahoeController42=t.watchLandingPage;c("PageTransitions").registerHandler(this.$TahoeController28,r);c("PageTransitions").go(t.uri);this.$TahoeController8=this.$TahoeController44();this.$TahoeController8.show();this.$TahoeController45();if(t.mediaController){switch(this.$TahoeController27){case c("TahoeMediaType").VIDEO:this.$TahoeController46(t.mediaController.video);this.$TahoeController15=this.$TahoeController26.getMediaID();break;case c("TahoeMediaType").PHOTO:this.$TahoeController46(t.mediaController);this.$TahoeController15=c("PhotoPermalinkURI").parse(t.uri).photo_id;break}this.$TahoeController47();this.$TahoeController16=this.$TahoeController25}else{this.$TahoeController48();switch(this.$TahoeController27){case c("TahoeMediaType").VIDEO:this.$TahoeController15=c("VideoPermalinkURI").parse(t.uri).video_id;break;case c("TahoeMediaType").PHOTO:this.$TahoeController15=c("PhotoPermalinkURI").parse(t.uri).photo_id;break}}c("FantaTabActions").minimizeAllTabs();c("Arbiter").inform("chat/option-changed",{name:"hide_buddylist",value:true});this.$TahoeController33=t.relatedResultIDs||[];this.$TahoeController14=t.feedTracking;if(c("TahoeVariables").useTahoePhotos&&this.$TahoeController27===c("TahoeMediaType").PHOTO)this.$TahoeController39=c("TahoePhotoView").loadView(this,{surface:t.photoSurface,preloadedImage:t.preloadedImage});else this.$TahoeController39=c("TahoeVideoView").loadView(this,this.$TahoeController37,this.$TahoeController38)}s.prototype.go=function(t){c("PageTransitions").go(t)};s.prototype.onExit=function(t){if(this.$TahoeController1)this.$TahoeController49();else if(t=="wns"){this.logEvent(c("TahoeLoggerEvent").EXIT_WITH_WNS_CONTROL);c("PageTransitions").go(this.$TahoeController10)}else c("PageTransitions").go(this.$TahoeController10)};s.prototype.getReactionVideoChannelType=function(){return this.$TahoeController31};s.prototype.getReactionVideoChannelSubtype=function(){return this.$TahoeController32};s.prototype.getSearchKeywordsForVideoChaining=function(){return this.$TahoeController34};s.prototype.getRelatedResultIDs=function(){return this.$TahoeController33};s.prototype.getFeedTracking=function(){return this.$TahoeController14};s.prototype.getStoryIdentifier=function(){return this.$TahoeController40};s.prototype.$TahoeController44=function(){__p&&__p();var t={width:o};this.$TahoeController9=c("CSS").setClass(c("DOM").create("div"),"_5-g-");this.$TahoeController24=c("CSS").setClass(c("DOM").create("div"),"_6444");c("DOM").appendContent(this.$TahoeController9,this.$TahoeController24);this.$TahoeController36=c("CSS").setClass(c("DOM").create("div"),"_6445");c("DOM").appendContent(this.$TahoeController9,this.$TahoeController36);var u=new(c("DialogX"))(t,this.$TahoeController9);c("CSS").setClass(u.getRoot(),"_5-g_");if(document.body)c("CSS").addClass(document.body,"_1_-b");return u};s.prototype.$TahoeController45=function(){var t=this.$TahoeController8;if(t==null)return;var u=c("DOMQuery").find(document.body,"._li");c("DOM").appendContent(u,t.getRoot())};s.prototype.$TahoeController50=function(){var t=this.$TahoeController42?this.$TahoeController42:this.$TahoeController10;c("ReactDOM").render(c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("TahoeBackAffordanceContainer.react").__setRef("TahoeController"),bootloadPlaceholder:c("React").createElement("div",{className:"_4ua2"}),entryURI:t,isPermalink:this.$TahoeController22,isShowVideo:!!this.$TahoeController42,mediaController:this.$TahoeController26}),this.$TahoeController24)};s.prototype.$TahoeController46=function(t){c("TahoeActions").setMediaController(t);this.$TahoeController26=t;var u=t,v=u.isBroadcast();if(v&&document.body){var w=c("LiveVideoExperiments").getParamsValueAndLogExposure(c("LiveVideoExperiments").UNIVERSE.VERTICAL_REACTIONS);if(w.isReactionBarRightAligned&&document.body)c("CSS").addClass(document.body,"_3yn5")}};s.prototype.$TahoeController48=function(){this.$TahoeController50();var t=this.$TahoeController27===c("TahoeMediaType").PHOTO?c("CSS").setClass(c("DOM").create("div"),"_2-sx"):c("CSS").setClass(c("DOM").create("div"),"_1c_u");c("ReactDOM").render(c("React").createElement(c("XUISpinner.react"),{className:"_179h",size:"large",background:"dark"}),t);this.$TahoeController25=t;var u=c("CSS").setClass(c("DOM").create("div"),"_5-yb _5_63");c("DOM").setContent(u,this.$TahoeController25);c("DOM").prependContent(this.$TahoeController24,u);this.$TahoeController51()};s.prototype.$TahoeController47=function(){__p&&__p();this.$TahoeController50();this.$TahoeController13=c("DOM").create("div");switch(this.$TahoeController27){case c("TahoeMediaType").VIDEO:var t=this.$TahoeController26;this.$TahoeController25=t.getRootNode();this.$TahoeController17=this.$TahoeController26;var u=t.getSource();this.$TahoeController19=u?u:c("VideoPlayerLoggerSource").INLINE;break;case c("TahoeMediaType").PHOTO:this.$TahoeController25=this.$TahoeController26.getRootNode();this.$TahoeController17=this.$TahoeController26;break}var v=c("getElementPosition")(this.$TahoeController25);this.$TahoeController20=this.$TahoeController25.clientWidth;this.$TahoeController18=this.$TahoeController25.clientHeight;c("DOM").insertAfter(this.$TahoeController25,this.$TahoeController13);this.$TahoeController35=true;var w=c("CSS").setClass(c("DOM").create("div"),"_5-yb _5_63");c("DOM").setContent(w,this.$TahoeController25);c("DOM").prependContent(this.$TahoeController24,w);this.$TahoeController52(w,v)};s.prototype.$TahoeController52=function(t,u){this.$TahoeController53();var v=c("Style").getFloat(this.$TahoeController25,"width"),w=c("Style").getFloat(this.$TahoeController25,"height"),x="translate("+u.x+"px,"+u.y+"px)",y="scale("+u.width/v+", "+u.height/w+")";c("Style").set(t,c("getVendorPrefixedName")("transform"),x+" "+y);t.offsetWidth;c("Style").set(t,"transition","all .4s cubic-bezier(.12,.8,.32,1)");c("Style").set(t,c("getVendorPrefixedName")("transform"),"none")};s.prototype.$TahoeController53=function(){__p&&__p();this.$TahoeController2=parseFloat(this.$TahoeController25.getAttribute("data-original-aspect-ratio"));switch(this.$TahoeController27){case c("TahoeMediaType").VIDEO:var t=this.$TahoeController26;t.updateSource(c("VideoPlayerLoggerSource").TAHOE);c("VideoAutoplayControllerX").setShouldAutoplay(false);!this.$TahoeController21&&t.unmute();this.$TahoeController7!=null&&t.setVolume(this.$TahoeController7);if(this.$TahoeController3||this.$TahoeController30===c("VideoPlayerReason").USER){t.play(this.$TahoeController30);this.$TahoeController21&&t.mute()}this.$TahoeController26.emit("TahoeController/enterTahoe");if(j)j.destroyComponentIfAvailable(this.$TahoeController26)}this.$TahoeController51();this.$TahoeController12.push(c("ResizeListener").add(this.$TahoeController54))};s.prototype.setPlayReason=function(t){this.$TahoeController30=t};s.prototype.addEvent=function(event){this.$TahoeController12.push(event)};s.prototype.getMediaController=function(){return this.$TahoeController26};s.prototype.setFullWidth=function(t){this.$TahoeController41=t;this.$TahoeController51()};s.prototype.$TahoeController51=function(){__p&&__p();if(this.$TahoeController23)return;var t=this.$TahoeController41?window.innerWidth:window.innerWidth-l;t=Math.max(t,p);var u=window.innerHeight-m-n;u=Math.max(u,q);c("Style").set(this.$TahoeController25,"width",t+"px");c("Style").set(this.$TahoeController25,"height",u+"px");switch(this.$TahoeController27){case c("TahoeMediaType").VIDEO:var v=this.$TahoeController26;v&&v.removeOffsetStylings();break;case c("TahoeMediaType").PHOTO:break}this.$TahoeController26&&this.$TahoeController26.setDimensions(t,u)};s.prototype.$TahoeController43=function(t){__p&&__p();var u=c("URI").getRequestURI();if(t.getPath()===this.$TahoeController10.getPath()&&t.getQueryData().ref!=="tahoe")if(this.$TahoeController19===c("VideoPlayerLoggerSource").WATCH_SCROLL){this.$TahoeController1=true;if(c("shouldWNSRenderToRHC")())this.$TahoeController26.emit("crossfadeWatchAndScroll");else this.$TahoeController26.emit("enterWatchAndScroll")}else this.$TahoeController49();else if(!this.$TahoeController55(t)){this.$TahoeController49();return false}else if((this.$TahoeController10.getPath()!=u.getPath()||u.getQueryData().ref==="tahoe")&&u.getPath()!=t.getPath())this.$TahoeController56(t);else if(c("TahoeVariables").useTahoeFallback&&u.getPath()===t.getPath()){var v=this.$TahoeController26;if(v&&v.isState("fallback"))this.$TahoeController56(t)}c("PageTransitions").transitionComplete();return true};s.prototype.$TahoeController55=function(t){if(c("TahoeVariables").useTahoePhotos)return c("PhotoPermalinkURI").isValid(t)||c("VideoPermalinkURI").isValid(t);else return c("VideoPermalinkURI").isValid(t)};s.prototype.$TahoeController56=function(t){this.$TahoeController23=true;var u=this.$TahoeController26;u.pause();this.$TahoeController57();var v=c("VideoPermalinkURI").parse(t).video_id,w=t.getQueryData().sp;this.$TahoeController39.updateView(v,this.$TahoeController5,this.$TahoeController4,w)};s.prototype.resetChannelData=function(){this.$TahoeController5=null;this.$TahoeController4=null};s.prototype.$TahoeController57=function(){__p&&__p();var t=this.$TahoeController25.clientHeight,u=c("CSS").setClass(c("DOM").create("div"),"_1c_u _61-j");c("ReactDOM").render(c("React").createElement(c("XUISpinner.react"),{size:"large",background:"dark"}),u);c("Style").set(u,"height",t+"px");c("DOM").prependContent(this.$TahoeController24,u);if(this.$TahoeController35){c("DOM").insertAfter(this.$TahoeController13,this.$TahoeController16);c("DOM").remove(this.$TahoeController13);c("Style").set(this.$TahoeController16,"width","");c("Style").set(this.$TahoeController16,"height","")}else c("DOM").remove(this.$TahoeController24.children[1]);this.$TahoeController35=false};s.prototype.$TahoeController49=function(){__p&&__p();this.$TahoeController39&&this.$TahoeController39.onExit();c("PageTransitions").removeHandler(this.$TahoeController28,r);this.$TahoeController12.forEach(function(w){return w.remove()});this.$TahoeController12=[];c("Style").set(this.$TahoeController25,"width","");c("Style").set(this.$TahoeController25,"height","");this.$TahoeController57();switch(this.$TahoeController27){case c("TahoeMediaType").VIDEO:var t=this.$TahoeController17;c("VideoAutoplayControllerX").setShouldAutoplay(true);if(this.$TahoeController17){if(!(this.$TahoeController19===c("VideoPlayerLoggerSource").WATCH_SCROLL&&this.$TahoeController17!==this.$TahoeController26)){t.addOffsetStylings();t.setDimensions(this.$TahoeController20,this.$TahoeController18);t.updateSource(this.$TahoeController19)}t.pause(c("VideoPlayerReason").AUTOPLAY);t.mute();if(t.getState()!=="finished")this.$TahoeController17.emit("resumeAutoplay");this.$TahoeController17.emit("TahoeController/exitTahoe")}this.$TahoeController26&&this.$TahoeController26.emit("TahoeController/exitTahoe");if(this.$TahoeController26!==this.$TahoeController17){var u=this.$TahoeController26;u.pause(c("VideoPlayerReason").USER)}break}var v=document.body;if(v){c("CSS").removeClass(v,"_1_-b");c("CSS").removeClass(v,"_3yn5")}c("ReactDOM").unmountComponentAtNode(this.$TahoeController24);if(this.$TahoeController8!=null){this.$TahoeController8.destroy();this.$TahoeController8=null}this.$TahoeController6&&c("TimeSlice").cancel(this.$TahoeController6);c("Tahoe").set(null);if(this.$TahoeController22)c("PageTransitions").go("/")};s.prototype.getID=function(){return this.$TahoeController15};s.prototype.getDialogContent=function(){return this.$TahoeController9};s.prototype.getContent=function(){return this.$TahoeController24};s.prototype.getSideContent=function(){return this.$TahoeController36};s.prototype.getChannelID=function(){return this.$TahoeController5};s.prototype.getCaller=function(){return this.$TahoeController4};s.prototype.getExternalLogID=function(){return this.$TahoeController11};s.prototype.getIsPermalink=function(){return this.$TahoeController22};s.prototype.updateMedia=function(t){__p&&__p();var u=this.$TahoeController26;if(u&&typeof u.getVolume==="function"&&typeof u.isMuted==="function"){this.$TahoeController7=u.getVolume();this.$TahoeController21=u.isMuted()}this.$TahoeController46(t);this.$TahoeController25=this.$TahoeController26.getRootNode();this.$TahoeController15=this.$TahoeController26.getMediaID();this.$TahoeController23=false;this.$TahoeController53();if(this.$TahoeController27===c("TahoeMediaType").VIDEO){var v=this.$TahoeController39;v.setUpEndScreen()}this.$TahoeController39.setUpUFI();this.$TahoeController30=c("VideoPlayerReason").USER};s.prototype.getView=function(){return this.$TahoeController39};s.prototype.setAutoplayAllowed=function(t){this.$TahoeController3=t};s.prototype.logEvent=function(t){new(c("TahoeTypedLogger"))().setEvent(t).setMediaID(this.$TahoeController15).log()};s.openFromVideoPlayer=function(t,u,v,w,x,y,z,A){__p&&__p();c("EventProfiler").tagCurrentActiveInteractionsAs("TahoeFromVideoPlayer");var B=c("TimeSlice").getGuardedContinuation("TahoeController beginPlayback");t.once("beginPlayback",B.bind(undefined,function(){c("EventProfiler").informPointOnActiveInteractions("tahoe_media_done",{isPointOfInterest:true},true)}));var C=c("collectDataAttributes")(t.getRootNode(),["ft"]),D=new s({mediaType:c("TahoeMediaType").VIDEO,mediaController:{video:t},uri:u,channelID:v,caller:w,origin:y,suborigin:z,feedTracking:C,storyIdentifier:A});D.$TahoeController6=B;c("Tahoe").set(D);switch(x){case"player_click":D.logEvent(c("TahoeLoggerEvent").ENTER_WITH_PLAYER_CLICK);break;case"control_click":D.logEvent(c("TahoeLoggerEvent").ENTER_WITH_CONTROL_CLICK);break}};s.openFromVideoLink=function(t){__p&&__p();var u=arguments.length<=1||arguments[1]===undefined?{channelID:null,caller:null}:arguments[1],v=u.channelID,w=u.caller,x=u.origin,y=u.suborigin,z=u.reactionVideoChannelType,A=u.reactionVideoChannelSubtype,B=u.externalLogID,C=u.searchKeywordsForVideoChaining;c("EventProfiler").tagCurrentActiveInteractionsAs("TahoeFromVideoLink");if(k)k.pauseActiveVideo();var D=c("Tahoe").get();if(D){c("PageTransitions").go(t);return}if(!x)x=w&&w in c("VideoChannelCallerToPlayerOriginMap")?c("VideoChannelCallerToPlayerOriginMap")[w]:c("VideoPlayerOrigins").UNKNOWN;c("Tahoe").set(new s({mediaType:c("TahoeMediaType").VIDEO,uri:t,channelID:v,caller:w,origin:x,suborigin:y,reactionVideoChannelType:z,reactionVideoChannelSubtype:A,externalLogID:B,searchKeywordsForVideoChaining:C}))};s.openFromVideoLinkHelper=function(t,u,v){var w=t.getAttribute("data-channel-caller"),x=w,y=t.getAttribute("data-external-log-id")||undefined,z=t.getAttribute("data-player-origin")||u;s.openFromVideoLink(new(c("URI"))(t.getAttribute("href")).addQueryData("ref","tahoe"),{channelID:t.getAttribute("data-video-channel-id"),caller:x,origin:z,suborigin:v,externalLogID:y,searchKeywordsForVideoChaining:t.getAttribute("data-search-keyword")})};s.openFromVideoPermalink=function(t){c("Tahoe").set(new s({mediaType:c("TahoeMediaType").VIDEO,uri:new(c("URI"))(t),origin:c("VideoPlayerOrigins").PERMALINK,suborigin:"tahoe",isPermalink:true}))};s.openFromShowVideoPermalink=function(t,u){c("Tahoe").set(new s({mediaType:c("TahoeMediaType").VIDEO,uri:new(c("URI"))(t),origin:c("VideoPlayerOrigins").VIDEO_HOME,suborigin:"notifications",isPermalink:true,watchLandingPage:u}))};s.openPhoto=function(t,u){var v=u.relatedResultIDs,w=u.photoSurface,x=u.preloadedImage;c("EventProfiler").tagCurrentActiveInteractionsAs("TahoeFromPhoto");c("Tahoe").set(new s({mediaType:c("TahoeMediaType").PHOTO,preloadedImage:x,relatedResultIDs:v,photoSurface:w,uri:t}))};s.openPhotoFromSearch=function(t,u){var v=new(c("URI"))(t.getAttribute("href"));s.openPhoto(v,{relatedResultIDs:u,photoSurface:c("TahoePhotoSurfaces").SEARCH})};f.exports=s}),null);